<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="alternative" href="/atom.xml" title="Horve的前端笔记" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>javascript - Horve的前端笔记</title><link rel="stylesheet" href="/css/main.css" type="text/css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--></head><body><header class="head"><h1 class="head-title u-fl"><a href="/">Horve的前端笔记</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a href="/archives" class="head-nav__link">文章</a></li><li class="head-nav__item"><a href="http://weibo.com/andforce" class="head-nav__link">微博</a></li><li class="head-nav__item"><a href="https://github.com/andforce" class="head-nav__link">GitHub</a></li><li class="head-nav__item"><a href="https://bintray.com/andforce" class="head-nav__link">Bintray</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time datetime="2016-03-02T02:31:44.000Z" class="post__time">March 2, 2016</time><h1 class="post__title"><a href="/2016/03/02/fecollection/">前端问题汇总</a></h1><hr/></header><div class="post__main echo"><!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong>  <em>generated with <a href="http://doctoc.herokuapp.com/" target="_blank" rel="external">DocToc</a></em><br><a id="more"></a></p>
<ul>
<li><a href="#fe-interview">FE-interview</a><ul>
<li><a href="#$html，-http，web综合问题">$HTML， HTTP，web综合问题</a><ul>
<li><a href="#常见排序算法的时间复杂度空间复杂度">常见排序算法的时间复杂度,空间复杂度</a></li>
<li><a href="#前端需要注意哪些seo">前端需要注意哪些SEO</a></li>
<li><a href="#web开发中会话跟踪的方法有哪些">web开发中会话跟踪的方法有哪些</a></li>
<li><a href="#img的title和alt有什么区别"><code>&lt;img&gt;</code>的<code>title</code>和<code>alt</code>有什么区别</a></li>
<li><a href="#doctype是什么举例常见doctype及特点">doctype是什么,举例常见doctype及特点</a></li>
<li><a href="#html全局属性global-attribute有哪些">HTML全局属性(global attribute)有哪些</a></li>
<li><a href="#什么是web语义化有什么好处">什么是web语义化,有什么好处</a></li>
<li><a href="#http-method">HTTP method</a></li>
<li><a href="#从浏览器地址栏输入url到显示页面的步骤以http为例">从浏览器地址栏输入url到显示页面的步骤(以HTTP为例)</a></li>
<li><a href="#http-request报文结构是怎样的">HTTP request报文结构是怎样的</a></li>
<li><a href="#http-response报文结构是怎样的">HTTP response报文结构是怎样的</a></li>
<li><a href="#如何进行网站性能优化">如何进行网站性能优化</a></li>
<li><a href="#什么是渐进增强">什么是渐进增强</a></li>
<li><a href="#http状态码及其含义">HTTP状态码及其含义</a></li>
</ul>
</li>
<li><a href="#$css部分">$CSS部分</a><ul>
<li><a href="#css选择器有哪些">CSS选择器有哪些</a></li>
<li><a href="#css-sprite是什么有什么优缺点">css sprite是什么,有什么优缺点</a></li>
<li><a href="#display-none与visibility-hidden的区别"><code>display: none;</code>与<code>visibility: hidden;</code>的区别</a></li>
<li><a href="#css-hack原理及常用hack">css hack原理及常用hack</a></li>
<li><a href="#specified-valuecomputed-valueused-value计算方法">specified value,computed value,used value计算方法</a></li>
<li><a href="#link与@import的区别"><code>link</code>与<code>@import</code>的区别</a></li>
<li><a href="#display-block和display-inline的区别"><code>display: block;</code>和<code>display: inline;</code>的区别</a></li>
<li><a href="#pnggifjpg的区别及如何选">PNG,GIF,JPG的区别及如何选</a></li>
<li><a href="#css有哪些继承属性">CSS有哪些继承属性</a></li>
<li><a href="#ie6浏览器有哪些常见的bug缺陷或者与标准不一致的地方如何解决">IE6浏览器有哪些常见的bug,缺陷或者与标准不一致的地方,如何解决</a></li>
<li><a href="#容器包含若干浮动元素时如何清理包含浮动">容器包含若干浮动元素时如何清理(包含)浮动</a></li>
<li><a href="#什么是fouc如何避免">什么是FOUC?如何避免</a></li>
<li><a href="#如何创建块级格式化上下文block-formatting-contextbfc有什么用">如何创建块级格式化上下文(block formatting context),BFC有什么用</a></li>
<li><a href="#displayfloatposition的关系">display,float,position的关系</a></li>
<li><a href="#外边距折叠collapsing-margins">外边距折叠(collapsing margins)</a></li>
<li><a href="#如何确定一个元素的包含块containing-block">如何确定一个元素的包含块(containing block)</a></li>
<li><a href="#stacking-context布局规则">stacking context,布局规则</a></li>
<li><a href="#如何水平居中一个元素">如何水平居中一个元素</a></li>
<li><a href="#如何竖直居中一个元素">如何竖直居中一个元素</a></li>
</ul>
</li>
<li><a href="#$javascript概念部分">$javascript概念部分</a><ul>
<li><a href="#dom元素e的egetattributepropname和epropname有什么区别和联系">DOM元素e的e.getAttribute(propName)和e.propName有什么区别和联系</a></li>
<li><a href="#offsetwidthoffsetheightclientwidthclientheight与scrollwidthscrollheight的区别">offsetWidth/offsetHeight,clientWidth/clientHeight与scrollWidth/scrollHeight的区别</a></li>
<li><a href="#xmlhttprequest通用属性和方法">XMLHttpRequest通用属性和方法</a></li>
<li><a href="#focusblur与focusinfocusout的区别与联系">focus/blur与focusin/focusout的区别与联系</a></li>
<li><a href="#mouseovermouseout与mouseentermouseleave的区别与联系">mouseover/mouseout与mouseenter/mouseleave的区别与联系</a></li>
<li><a href="#sessionstoragelocalstoragecookie区别">sessionStorage,localStorage,cookie区别</a></li>
<li><a href="#javascript跨域通信">javascript跨域通信</a></li>
<li><a href="#javascript有哪几种数据类型">javascript有哪几种数据类型</a></li>
<li><a href="#什么闭包闭包有什么用">什么闭包,闭包有什么用</a></li>
<li><a href="#javascript有哪几种方法定义函数">javascript有哪几种方法定义函数</a></li>
<li><a href="#应用程序存储和离线web应用">应用程序存储和离线web应用</a></li>
<li><a href="#客户端存储localstorage和sessionstorage">客户端存储localStorage和sessionStorage</a></li>
<li><a href="#cookie及其操作">cookie及其操作</a></li>
<li><a href="#javascript有哪些方法定义对象">javascript有哪些方法定义对象</a></li>
<li><a href="#===运算符判断相等的流程是怎样的">===运算符判断相等的流程是怎样的</a></li>
<li><a href="#==运算符判断相等的流程是怎样的">==运算符判断相等的流程是怎样的</a></li>
<li><a href="#对象到字符串的转换步骤">对象到字符串的转换步骤</a></li>
<li><a href="#对象到数字的转换步骤">对象到数字的转换步骤</a></li>
<li><a href="#==的比较规则">&lt;,&gt;,&lt;=,&gt;=的比较规则</a></li>
<li><a href="#运算符工作流程">+运算符工作流程</a></li>
<li><a href="#函数内部arguments变量有哪些特性有哪些属性如何将它转换为数组">函数内部arguments变量有哪些特性,有哪些属性,如何将它转换为数组</a></li>
<li><a href="#dom事件模型是如何的编写一个eventutil工具类实现事件管理兼容">DOM事件模型是如何的,编写一个EventUtil工具类实现事件管理兼容</a></li>
<li><a href="#评价一下三种方法实现继承的优缺点并改进">评价一下三种方法实现继承的优缺点,并改进</a></li>
</ul>
</li>
<li><a href="#$javascript编程部分">$javascript编程部分</a><ul>
<li><a href="#请用原生js实现一个函数给页面制定的任意一个元素添加一个透明遮罩透明度可变默认02使这个区域点击无效要求兼容ie8及各主流浏览器遮罩层效果如下图所示">请用原生js实现一个函数,给页面制定的任意一个元素添加一个透明遮罩(透明度可变,默认0.2),使这个区域点击无效,要求兼容IE8+及各主流浏览器,遮罩层效果如下图所示:</a></li>
<li><a href="#请用代码写出今天是星期x其中x表示当天是星期几如果当天是星期一输出应该是今天是星期一">请用代码写出(今天是星期x)其中x表示当天是星期几,如果当天是星期一,输出应该是”今天是星期一”</a></li>
<li><a href="#下面这段代码想要循环延时输出结果0-1-2-3-4请问输出结果是否正确如果不正确请说明为什么并修改循环内的代码使其输出正确结果">下面这段代码想要循环延时输出结果0 1 2 3 4,请问输出结果是否正确,如果不正确,请说明为什么,并修改循环内的代码使其输出正确结果</a></li>
<li><a href="#现有一个page类其原型对象上有许多以post开头的方法如postmsg另有一拦截函数chekc只返回ture或false请设计一个函数该函数应批量改造原page的postxxx方法在保留其原有功能的同时为每个postxxx方法增加拦截验证功能当chekc返回true时继续执行原postxxx方法返回false时不再执行原postxxx方法">现有一个Page类,其原型对象上有许多以post开头的方法(如postMsg);另有一拦截函数chekc,只返回ture或false.请设计一个函数,该函数应批量改造原Page的postXXX方法,在保留其原有功能的同时,为每个postXXX方法增加拦截验证功能,当chekc返回true时继续执行原postXXX方法,返回false时不再执行原postXXX方法</a></li>
<li><a href="#完成下面的tool-tip">完成下面的tool-tip</a></li>
<li><a href="#编写javascript深度克隆函数deepclone">编写javascript深度克隆函数deepClone</a></li>
<li><a href="#补充代码鼠标单击button1后将button1移动到button2的后面">补充代码,鼠标单击Button1后将Button1移动到Button2的后面</a></li>
<li><a href="#网页中实现一个计算当年还剩多少时间的倒数计时程序要求网页上实时动态显示××年还剩××天××时××分××秒">网页中实现一个计算当年还剩多少时间的倒数计时程序,要求网页上实时动态显示”××年还剩××天××时××分××秒”</a></li>
<li><a href="#完成一个函数接受数组作为参数数组元素为整数或者数组数组元素包含整数或数组函数返回扁平化后的数组">完成一个函数,接受数组作为参数,数组元素为整数或者数组,数组元素包含整数或数组,函数返回扁平化后的数组</a></li>
<li><a href="#如何判断一个对象是否为数组">如何判断一个对象是否为数组</a></li>
<li><a href="#请评价以下事件监听器代码并给出改进意见">请评价以下事件监听器代码并给出改进意见</a></li>
<li><a href="#如何判断一个对象是否为函数">如何判断一个对象是否为函数</a></li>
<li><a href="#编写一个函数接受url中query-string为参数返回解析后的objectquery-string使用applicationx-www-form-urlencoded编码">编写一个函数接受url中query string为参数,返回解析后的Object,query string使用application/x-www-form-urlencoded编码</a></li>
<li><a href="#解析一个完整的url返回object包含域与windowlocation相同">解析一个完整的url,返回Object包含域与window.location相同</a></li>
<li><a href="#完成函数getviewportsize返回指定窗口的视口尺寸">完成函数getViewportSize返回指定窗口的视口尺寸</a></li>
<li><a href="#完成函数getscrolloffset返回窗口滚动条偏移量">完成函数getScrollOffset返回窗口滚动条偏移量</a></li>
<li><a href="#现有一个字符串richtext是一段富文本需要显示在页面上有个要求需要给其中只包含一个img元素的p标签增加一个叫pic的class请编写代码实现可以使用jquery或kissy">现有一个字符串richText,是一段富文本,需要显示在页面上.有个要求,需要给其中只包含一个img元素的p标签增加一个叫pic的class.请编写代码实现.可以使用jQuery或KISSY.</a></li>
<li><a href="#请实现一个event类继承自此类的对象都会拥有两个方法onoffonce和trigger">请实现一个Event类,继承自此类的对象都会拥有两个方法on,off,once和trigger</a></li>
<li><a href="#编写一个函数将列表子元素顺序反转">编写一个函数将列表子元素顺序反转</a></li>
<li><a href="#以下函数的作用是空白区域应该填写什么">以下函数的作用是?空白区域应该填写什么</a></li>
<li><a href="#编写一个函数实现form的序列化即将一个表单中的键值序列化为可提交的字符串">编写一个函数实现form的序列化(即将一个表单中的键值序列化为可提交的字符串)</a></li>
<li><a href="#使用原生javascript给下面列表中的li节点绑定点击事件点击时创建一个object对象兼容ie和标准浏览器">使用原生javascript给下面列表中的li节点绑定点击事件,点击时创建一个Object对象,兼容IE和标准浏览器</a></li>
<li><a href="#有一个大数组var-a-=-1-2-3-a的长度是100内容填充随机整数的字符串请先构造此数组a然后设计一个算法将其内容去重">有一个大数组,var a = [‘1’, ‘2’, ‘3’, …];a的长度是100,内容填充随机整数的字符串.请先构造此数组a,然后设计一个算法将其内容去重</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h1 id="FE-interview">FE-interview</h1><p>个人收集的前端知识点、面试题和答案，参考答案仅代表个人观点，方便复习，目录如下，通过文档内搜索目录可快速定位章节</p>
<h2 id="$HTML，_HTTP，web综合问题">$HTML， HTTP，web综合问题</h2><h3 id="常见排序算法的时间复杂度,空间复杂度">常见排序算法的时间复杂度,空间复杂度</h3><p><img src="/images/fe/sort-compare.png" alt="排序算法比较"></p>
<h3 id="前端需要注意哪些SEO">前端需要注意哪些SEO</h3><ol>
<li>合理的title、description、keywords：搜索对着三项的权重逐个减小，title值强调重点即可，重要关键词出现不要超过2次，而且要靠前，不同页面title要有所不同；description把页面内容高度概括，长度合适，不可过分堆砌关键词，不同页面description有所不同；keywords列举出重要关键词即可</li>
<li>语义化的HTML代码，符合W3C规范：语义化代码让搜索引擎容易理解网页</li>
<li>重要内容HTML代码放在最前：搜索引擎抓取HTML顺序是从上到下，有的搜索引擎对抓取长度有限制，保证重要内容一定会被抓取</li>
<li>重要内容不要用js输出：爬虫不会执行js获取内容</li>
<li>少用iframe：搜索引擎不会抓取iframe中的内容</li>
<li>非装饰性图片必须加alt</li>
<li>提高网站速度：网站速度是搜索引擎排序的一个重要指标</li>
</ol>
<h3 id="web开发中会话跟踪的方法有哪些">web开发中会话跟踪的方法有哪些</h3><ol>
<li>cookie</li>
<li>session</li>
<li>url重写</li>
<li>隐藏input</li>
<li>ip地址</li>
</ol>
<h3 id="&lt;img&gt;的title和alt有什么区别"><code>&lt;img&gt;</code>的<code>title</code>和<code>alt</code>有什么区别</h3><ol>
<li><code>title</code>是<a href="http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.core" target="_blank" rel="external">global attributes</a>之一，用于为元素提供附加的advisory information。通常当鼠标滑动到元素上的时候显示。</li>
<li><code>alt</code>是<code>&lt;img&gt;</code>的特有属性，是图片内容的等价描述，用于图片无法加载时显示、读屏器阅读图片。可提图片高可访问性，除了纯装饰图片外都必须设置有意义的值，搜索引擎会重点分析。</li>
</ol>
<h3 id="doctype是什么,举例常见doctype及特点">doctype是什么,举例常见doctype及特点</h3><ol>
<li><code>&lt;!doctype&gt;</code>声明必须处于HTML文档的头部，在<code>&lt;html&gt;</code>标签之前，HTML5中不区分大小写</li>
<li><code>&lt;!doctype&gt;</code>声明不是一个HTML标签，是一个用于告诉浏览器当前HTMl版本的指令</li>
<li>现代浏览器的html布局引擎通过检查doctype决定使用兼容模式还是标准模式对文档进行渲染，一些浏览器有一个接近标准模型。</li>
<li>在HTML4.01中<code>&lt;!doctype&gt;</code>声明指向一个DTD，由于HTML4.01基于SGML，所以DTD指定了标记规则以保证浏览器正确渲染内容</li>
<li>HTML5不基于SGML，所以不用指定DTD</li>
</ol>
<p>常见dotype：</p>
<ol>
<li><strong>HTML4.01 strict</strong>：不允许使用表现性、废弃元素（如font）以及frameset。声明：<code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</code></li>
<li><strong>HTML4.01 Transitional</strong>:允许使用表现性、废弃元素（如font），不允许使用frameset。声明：<code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</code></li>
<li><strong>HTML4.01 Frameset</strong>:允许表现性元素，废气元素以及frameset。声明：<code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;</code></li>
<li><strong>XHTML1.0 Strict</strong>:不使用允许表现性、废弃元素以及frameset。文档必须是结构良好的XML文档。声明：<code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;</code></li>
<li><strong>XHTML1.0 Transitional</strong>:允许使用表现性、废弃元素，不允许frameset，文档必须是结构良好的XMl文档。声明： <code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;</code></li>
<li><strong>XHTML 1.0 Frameset</strong>:允许使用表现性、废弃元素以及frameset，文档必须是结构良好的XML文档。声明：<code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;</code></li>
<li><strong>HTML 5</strong>: <code>&lt;!doctype html&gt;</code></li>
</ol>
<h3 id="HTML全局属性(global_attribute)有哪些">HTML全局属性(global attribute)有哪些</h3><p>参考资料：<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes" target="_blank" rel="external">MDN: html global attribute</a>或者<a href="http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.core" target="_blank" rel="external">W3C HTML global-attributes</a></p>
<ul>
<li><code>accesskey</code>:设置快捷键，提供快速访问元素如<a href="#" accesskey="a">aaa</a>在windows下的firefox中按<code>alt + shift + a</code>可激活元素</li>
<li><code>class</code>:为元素设置类标识，多个类名用空格分开，CSS和javascript可通过class属性获取元素</li>
<li><code>contenteditable</code>: 指定元素内容是否可编辑</li>
<li><code>contextmenu</code>: 自定义鼠标右键弹出菜单内容</li>
<li><code>data-*</code>: 为元素增加自定义属性</li>
<li><code>dir</code>: 设置元素文本方向</li>
<li><code>draggable</code>: 设置元素是否可拖拽</li>
<li><code>dropzone</code>: 设置元素拖放类型： copy, move, link</li>
<li><code>hidden</code>: 表示一个元素是否与文档。样式上会导致元素不显示，但是不能用这个属性实现样式效果</li>
<li><code>id</code>: 元素id，文档内唯一</li>
<li><code>lang</code>: 元素内容的的语言</li>
<li><code>spellcheck</code>: 是否启动拼写和语法检查</li>
<li><code>style</code>: 行内css样式</li>
<li><code>tabindex</code>: 设置元素可以获得焦点，通过tab可以导航</li>
<li><code>title</code>: 元素相关的建议信息</li>
<li><code>translate</code>: 元素和子孙节点内容是否需要本地化</li>
</ul>
<h3 id="什么是web语义化,有什么好处">什么是web语义化,有什么好处</h3><p>web语义化是指通过HTML标记表示页面包含的信息，包含了HTML标签的语义化和css命名的语义化。<br>HTML标签的语义化是指：通过使用包含语义的标签（如h1-h6）恰当地表示文档结构<br>css命名的语义化是指：为html标签添加有意义的class，id补充未表达的语义，如<a href="http://en.wikipedia.org/wiki/Microformats" target="_blank" rel="external">Microformat</a>通过添加符合规则的class描述信息<br>为什么需要语义化：</p>
<ul>
<li>去掉样式后页面呈现清晰的结构</li>
<li>盲人使用读屏器更好地阅读</li>
<li>搜索引擎更好地理解页面，有利于收录</li>
<li>便团队项目的可持续运作及维护</li>
</ul>
<h3 id="HTTP_method">HTTP method</h3><ol>
<li>一台服务器要与HTTP1.1兼容，只要为资源实现<strong>GET</strong>和<strong>HEAD</strong>方法即可</li>
<li><strong>GET</strong>是最常用的方法，通常用于<strong>请求服务器发送某个资源</strong>。</li>
<li><strong>HEAD</strong>与GET类似，但<strong>服务器在响应中值返回首部，不返回实体的主体部分</strong></li>
<li><strong>PUT</strong>让服务器<strong>用请求的主体部分来创建一个由所请求的URL命名的新文档，或者，如果那个URL已经存在的话，就用干这个主体替代它</strong></li>
<li><strong>POST</strong>起初是用来向服务器输入数据的。实际上，通常会用它来支持HTML的表单。表单中填好的数据通常会被送给服务器，然后由服务器将其发送到要去的地方。</li>
<li><strong>TRACE</strong>会在目的服务器端发起一个环回诊断，最后一站的服务器会弹回一个TRACE响应并在响应主体中携带它收到的原始请求报文。TRACE方法主要用于诊断，用于验证请求是否如愿穿过了请求/响应链。</li>
<li><strong>OPTIONS</strong>方法请求web服务器告知其支持的各种功能。可以查询服务器支持哪些方法或者对某些特殊资源支持哪些方法。</li>
<li><strong>DELETE</strong>请求服务器删除请求URL指定的资源</li>
</ol>
<h3 id="从浏览器地址栏输入url到显示页面的步骤(以HTTP为例)">从浏览器地址栏输入url到显示页面的步骤(以HTTP为例)</h3><ol>
<li>在浏览器地址栏输入URL</li>
<li>浏览器查看<strong>缓存</strong>，如果请求资源在缓存中并且新鲜，跳转到转码步骤<ol>
<li>如果资源未缓存，发起新请求</li>
<li>如果已缓存，检验是否足够新鲜，足够新鲜直接提供给客户端，否则与服务器进行验证。</li>
<li>检验新鲜通常有两个HTTP头进行控制<code>Expires</code>和<code>Cache-Control</code>：<ul>
<li>HTTP1.0提供Expires，值为一个绝对时间表示缓存新鲜日期</li>
<li>HTTP1.1增加了Cache-Control: max-age=,值为以秒为单位的最大新鲜时间</li>
</ul>
</li>
</ol>
</li>
<li>浏览器<strong>解析URL</strong>获取协议，主机，端口，path</li>
<li>浏览器<strong>组装一个HTTP（GET）请求报文</strong></li>
<li>浏览器<strong>获取主机ip地址</strong>，过程如下：<ol>
<li>浏览器缓存</li>
<li>本机缓存</li>
<li>hosts文件</li>
<li>路由器缓存</li>
<li>ISP DNS缓存</li>
<li>DNS递归查询（可能存在负载均衡导致每次IP不一样）</li>
</ol>
</li>
<li><strong>打开一个socket与目标IP地址，端口建立TCP链接</strong>，三次握手如下：<ol>
<li>客户端发送一个TCP的<strong>SYN=1，Seq=X</strong>的包到服务器端口</li>
<li>服务器发回<strong>SYN=1， ACK=X+1， Seq=Y</strong>的响应包</li>
<li>客户端发送<strong>ACK=Y+1， Seq=Z</strong></li>
</ol>
</li>
<li>TCP链接建立后<strong>发送HTTP请求</strong></li>
<li>服务器接受请求并解析，将请求转发到服务程序，如虚拟主机使用HTTP Host头部判断请求的服务程序</li>
<li>服务器检查<strong>HTTP请求头是否包含缓存验证信息</strong>如果验证缓存新鲜，返回<strong>304</strong>等对应状态码</li>
<li>处理程序读取完整请求并准备HTTP响应，可能需要查询数据库等操作</li>
<li>服务器将<strong>响应报文通过TCP连接发送回浏览器</strong></li>
<li>浏览器接收HTTP响应，然后根据情况选择<strong>关闭TCP连接或者保留重用，关闭TCP连接的四次握手如下</strong>：<ol>
<li>主动方发送<strong>Fin=1， Ack=Z， Seq= X</strong>报文</li>
<li>被动方发送<strong>ACK=X+1， Seq=Z</strong>报文</li>
<li>被动方发送<strong>Fin=1， ACK=X， Seq=Y</strong>报文</li>
<li>主动方发送<strong>ACK=Y， Seq=X</strong>报文</li>
</ol>
</li>
<li>浏览器检查响应状态吗：是否为1XX，3XX， 4XX， 5XX，这些情况处理与2XX不同</li>
<li>如果资源可缓存，<strong>进行缓存</strong></li>
<li>对响应进行<strong>解码</strong>（例如gzip压缩）</li>
<li>根据资源类型决定如何处理（假设资源为HTML文档）</li>
<li><strong>解析HTML文档，构件DOM树，下载资源，构造CSSOM树，执行js脚本</strong>，这些操作没有严格的先后顺序，以下分别解释</li>
<li><strong>构建DOM树</strong>：<ol>
<li><strong>Tokenizing</strong>：根据HTML规范将字符流解析为标记</li>
<li><strong>Lexing</strong>：词法分析将标记转换为对象并定义属性和规则</li>
<li><strong>DOM construction</strong>：根据HTML标记关系将对象组成DOM树</li>
</ol>
</li>
<li>解析过程中遇到图片、样式表、js文件，<strong>启动下载</strong></li>
<li>构建<strong>CSSOM树</strong>：<ol>
<li><strong>Tokenizing</strong>：字符流转换为标记流</li>
<li><strong>Node</strong>：根据标记创建节点</li>
<li><strong>CSSOM</strong>：节点创建CSSOM树</li>
</ol>
</li>
<li><strong><a href="https://developers.google.com/web/fundamentals/performance/critical-rendering-path/render-tree-construction" target="_blank" rel="external">根据DOM树和CSSOM树构建渲染树</a></strong>:<ol>
<li>从DOM树的根节点遍历所有<strong>可见节点</strong>，不可见节点包括：1）<code>script</code>,<code>meta</code>这样本身不可见的标签。2)被css隐藏的节点，如<code>display: none</code></li>
<li>对每一个可见节点，找到恰当的CSSOM规则并应用</li>
<li>发布可视节点的内容和计算样式</li>
</ol>
</li>
<li><strong>js解析如下</strong>：<ol>
<li>浏览器创建Document对象并解析HTML，将解析到的元素和文本节点添加到文档中，此时<strong>document.readystate为loading</strong></li>
<li>HTML解析器遇到<strong>没有async和defer的script时</strong>，将他们添加到文档中，然后执行行内或外部脚本。这些脚本会同步执行，并且在脚本下载和执行时解析器会暂停。这样就可以用document.write()把文本插入到输入流中。<strong>同步脚本经常简单定义函数和注册事件处理程序，他们可以遍历和操作script和他们之前的文档内容</strong></li>
<li>当解析器遇到设置了<strong>async</strong>属性的script时，开始下载脚本并继续解析文档。脚本会在它<strong>下载完成后尽快执行</strong>，但是<strong>解析器不会停下来等它下载</strong>。异步脚本<strong>禁止使用document.write()</strong>，它们可以访问自己script和之前的文档元素</li>
<li>当文档完成解析，document.readState变成interactive</li>
<li>所有<strong>defer</strong>脚本会<strong>按照在文档出现的顺序执行</strong>，延迟脚本<strong>能访问完整文档树</strong>，禁止使用document.write()</li>
<li>浏览器<strong>在Document对象上触发DOMContentLoaded事件</strong></li>
<li>此时文档完全解析完成，浏览器可能还在等待如图片等内容加载，等这些<strong>内容完成载入并且所有异步脚本完成载入和执行</strong>，document.readState变为complete,window触发load事件</li>
</ol>
</li>
<li><strong>显示页面</strong>（HTML解析过程中会逐步显示页面）</li>
</ol>
<h3 id="HTTP_request报文结构是怎样的">HTTP request报文结构是怎样的</h3><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html" target="_blank" rel="external">rfc2616</a>中进行了定义：</p>
<ol>
<li>首行是<strong>Request-Line</strong>包括：<strong>请求方法</strong>，<strong>请求URI</strong>，<strong>协议版本</strong>，<strong>CRLF</strong></li>
<li>首行之后是若干行<strong>请求头</strong>，包括<strong>general-header</strong>，<strong>request-header</strong>或者<strong>entity-header</strong>，每个一行以CRLF结束</li>
<li>请求头和消息实体之间有一个<strong>CRLF分隔</strong></li>
<li>根据实际请求需要可能包含一个<strong>消息实体</strong><br>一个请求报文例子如下：</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="request">GET <span class="string">/Protocols/rfc2616/rfc2616-sec5.html</span> HTTP/1.1</span></span><br><span class="line"><span class="attribute">Host</span>: <span class="string">www.w3.org</span></span><br><span class="line"><span class="attribute">Connection</span>: <span class="string">keep-alive</span></span><br><span class="line"><span class="attribute">Cache-Control</span>: <span class="string">max-age=0</span></span><br><span class="line"><span class="attribute">Accept</span>: <span class="string">text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</span></span><br><span class="line"><span class="attribute">User-Agent</span>: <span class="string">Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/35.0.1916.153 Safari/537.36</span></span><br><span class="line"><span class="attribute">Referer</span>: <span class="string">https://www.google.com.hk/</span></span><br><span class="line"><span class="attribute">Accept-Encoding</span>: <span class="string">gzip,deflate,sdch</span></span><br><span class="line"><span class="attribute">Accept-Language</span>: <span class="string">zh-CN,zh;q=0.8,en;q=0.6</span></span><br><span class="line"><span class="attribute">Cookie</span>: <span class="string">authorstyle=yes</span></span><br><span class="line"><span class="attribute">If-None-Match</span>: <span class="string">"2cc8-3e3073913b100"</span></span><br><span class="line"><span class="attribute">If-Modified-Since</span>: <span class="string">Wed, 01 Sep 2004 13:24:52 GMT</span></span><br><span class="line"></span><br><span class="line"><span class="applescript"><span class="property">name</span>=qiu&amp;age=<span class="number">25</span></span></span><br></pre></td></tr></table></figure>
<h3 id="HTTP_response报文结构是怎样的">HTTP response报文结构是怎样的</h3><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html" target="_blank" rel="external">rfc2616</a>中进行了定义：</p>
<ol>
<li>首行是状态行包括：<strong>HTTP版本，状态码，状态描述</strong>，后面跟一个CRLF</li>
<li>首行之后是<strong>若干行响应头</strong>，包括：<strong>通用头部，响应头部，实体头部</strong></li>
<li>响应头部和响应实体之间用<strong>一个CRLF空行</strong>分隔</li>
<li>最后是一个可能的<strong>消息实体</strong><br>响应报文例子如下：</li>
</ol>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="status">HTTP/1.1 <span class="number">200</span> OK</span></span><br><span class="line"><span class="attribute">Date</span>: <span class="string">Tue, 08 Jul 2014 05:28:43 GMT</span></span><br><span class="line"><span class="attribute">Server</span>: <span class="string">Apache/2</span></span><br><span class="line"><span class="attribute">Last-Modified</span>: <span class="string">Wed, 01 Sep 2004 13:24:52 GMT</span></span><br><span class="line"><span class="attribute">ETag</span>: <span class="string">"40d7-3e3073913b100"</span></span><br><span class="line"><span class="attribute">Accept-Ranges</span>: <span class="string">bytes</span></span><br><span class="line"><span class="attribute">Content-Length</span>: <span class="string">16599</span></span><br><span class="line"><span class="attribute">Cache-Control</span>: <span class="string">max-age=21600</span></span><br><span class="line"><span class="attribute">Expires</span>: <span class="string">Tue, 08 Jul 2014 11:28:43 GMT</span></span><br><span class="line"><span class="attribute">P3P</span>: <span class="string">policyref="http://www.w3.org/2001/05/P3P/p3p.xml"</span></span><br><span class="line"><span class="attribute">Content-Type</span>: <span class="string">text/html; charset=iso-8859-1</span></span><br><span class="line"></span><br><span class="line"><span class="json">&#123;"<span class="attribute">name</span>": <span class="value"><span class="string">"qiu"</span></span>, "<span class="attribute">age</span>": <span class="value"><span class="number">25</span></span>&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="如何进行网站性能优化">如何进行网站性能优化</h3><p><a href="https://developer.yahoo.com/performance/rules.html" target="_blank" rel="external">雅虎Best Practices for Speeding Up Your Web Site</a>：</p>
<ul>
<li><p>content方面</p>
<ul>
<li>减少HTTP请求：合并文件、CSS精灵、inline Image</li>
<li>减少DNS查询：DNS查询完成之前浏览器不能从这个主机下载任何任何文件。方法：DNS缓存、将资源分布到恰当数量的主机名，平衡并行下载和DNS查询</li>
<li>避免重定向：多余的中间访问</li>
<li>使Ajax可缓存</li>
<li>非必须组件延迟加载</li>
<li>未来所需组件预加载</li>
<li>减少DOM元素数量</li>
<li>将资源放到不同的域下：浏览器同时从一个域下载资源的数目有限，增加域可以提高并行下载量</li>
<li>减少iframe数量</li>
<li>不要404</li>
</ul>
</li>
<li><p>Server方面</p>
<ul>
<li>使用CDN</li>
<li>添加Expires或者Cache-Control响应头</li>
<li>对组件使用Gzip压缩</li>
<li>配置ETag</li>
<li>Flush Buffer Early</li>
<li>Ajax使用GET进行请求</li>
<li>避免空src的img标签</li>
</ul>
</li>
<li>Cookie方面<ul>
<li>减小cookie大小</li>
<li>引入资源的域名不要包含cookie</li>
</ul>
</li>
<li>css方面<ul>
<li>将样式表放到页面顶部</li>
<li>不使用CSS表达式</li>
<li>使用<link>不使用@import</li>
<li>不使用IE的Filter</li>
</ul>
</li>
<li>Javascript方面<ul>
<li>将脚本放到页面底部</li>
<li>将javascript和css从外部引入</li>
<li>压缩javascript和css</li>
<li>删除不需要的脚本</li>
<li>减少DOM访问</li>
<li>合理设计事件监听器</li>
</ul>
</li>
<li>图片方面<ul>
<li>优化图片：根据实际颜色需要选择色深、压缩</li>
<li>优化css精灵</li>
<li>不要在HTML中拉伸图片</li>
<li>保证favicon.ico小并且可缓存</li>
</ul>
</li>
<li>移动方面<ul>
<li>保证组件小于25k</li>
<li>Pack Components into a Multipart Document</li>
</ul>
</li>
</ul>
<h3 id="什么是渐进增强">什么是渐进增强</h3><p>渐进增强是指在web设计时强调可访问性、语义化HTML标签、外部样式表和脚本。保证所有人都能访问页面的基本内容和功能同时为高级浏览器和高带宽用户提供更好的用户体验。核心原则如下:</p>
<ul>
<li>所有浏览器都必须能访问基本内容</li>
<li>所有浏览器都必须能使用基本功能</li>
<li>所有内容都包含在语义化标签中</li>
<li>通过外部CSS提供增强的布局</li>
<li>通过非侵入式、外部javascript提供增强功能</li>
<li>end-user web browser preferences are respected</li>
</ul>
<h3 id="HTTP状态码及其含义">HTTP状态码及其含义</h3><p>参考<a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" target="_blank" rel="external">RFC 2616</a></p>
<ul>
<li>1XX：信息状态码<ul>
<li><strong>100 Continue</strong>：客户端应当继续发送请求。这个临时相应是用来通知客户端它的部分请求已经被服务器接收，且仍未被拒绝。客户端应当继续发送请求的剩余部分，或者如果请求已经完成，忽略这个响应。服务器必须在请求万仇向客户端发送一个最终响应</li>
<li><strong>101 Switching Protocols</strong>：服务器已经理解力客户端的请求，并将通过Upgrade消息头通知客户端采用不同的协议来完成这个请求。在发送完这个响应最后的空行后，服务器将会切换到Upgrade消息头中定义的那些协议。</li>
</ul>
</li>
<li>2XX：成功状态码<ul>
<li><strong>200 OK</strong>：请求成功，请求所希望的响应头或数据体将随此响应返回</li>
<li><strong>201 Created</strong>：</li>
<li><strong>202 Accepted</strong>：</li>
<li><strong>203 Non-Authoritative Information</strong>：</li>
<li><strong>204 No Content</strong>：</li>
<li><strong>205 Reset Content</strong>：</li>
<li><strong>206 Partial Content</strong>：</li>
</ul>
</li>
<li>3XX：重定向<ul>
<li><strong>300 Multiple Choices</strong>：</li>
<li><strong>301 Moved Permanently</strong>：</li>
<li><strong>302 Found</strong>：</li>
<li><strong>303 See Other</strong>：</li>
<li><strong>304 Not Modified</strong>：</li>
<li><strong>305 Use Proxy</strong>：</li>
<li><strong>306 （unused）</strong>：</li>
<li><strong>307 Temporary Redirect</strong>：</li>
</ul>
</li>
<li>4XX：客户端错误<ul>
<li><strong>400 Bad Request</strong>:</li>
<li><strong>401 Unauthorized</strong>:</li>
<li><strong>402 Payment Required</strong>:</li>
<li><strong>403 Forbidden</strong>:</li>
<li><strong>404 Not Found</strong>:</li>
<li><strong>405 Method Not Allowed</strong>:</li>
<li><strong>406 Not Acceptable</strong>:</li>
<li><strong>407 Proxy Authentication Required</strong>:</li>
<li><strong>408 Request Timeout</strong>:</li>
<li><strong>409 Conflict</strong>:</li>
<li><strong>410 Gone</strong>:</li>
<li><strong>411 Length Required</strong>:</li>
<li><strong>412 Precondition Failed</strong>:</li>
<li><strong>413 Request Entity Too Large</strong>:</li>
<li><strong>414 Request-URI Too Long</strong>:</li>
<li><strong>415 Unsupported Media Type</strong>:</li>
<li><strong>416 Requested Range Not Satisfiable</strong>:</li>
<li><strong>417 Expectation Failed</strong>:</li>
</ul>
</li>
<li>5XX: 服务器错误<ul>
<li><strong>500 Internal Server Error</strong>:</li>
<li><strong>501 Not Implemented</strong>:</li>
<li><strong>502 Bad Gateway</strong>:</li>
<li><strong>503 Service Unavailable</strong>:</li>
<li><strong>504 Gateway Timeout</strong>:</li>
<li><strong>505 HTTP Version Not Supported</strong>:</li>
</ul>
</li>
</ul>
<h2 id="$CSS部分">$CSS部分</h2><h3 id="CSS选择器有哪些">CSS选择器有哪些</h3><ol>
<li><strong>*通用选择器</strong>：选择所有元素，<strong>不参与计算优先级</strong>，兼容性IE6+</li>
<li><strong>#X id选择器</strong>：选择id值为X的元素，兼容性：IE6+</li>
<li><strong>.X 类选择器</strong>： 选择class包含X的元素，兼容性：IE6+</li>
<li><strong>X Y后代选择器</strong>： 选择满足X选择器的后代节点中满足Y选择器的元素，兼容性：IE6+</li>
<li><strong>X 元素选择器</strong>： 选择标所有签为X的元素，兼容性：IE6+</li>
<li><strong>:link，：visited，：focus，：hover，：active链接状态</strong>： 选择特定状态的链接元素，顺序LoVe HAte，兼容性: IE4+</li>
<li><strong>X + Y直接兄弟选择器</strong>：在<strong>X之后第一个兄弟节点</strong>中选择满足Y选择器的元素，兼容性： IE7+</li>
<li><strong>X &gt; Y子选择器</strong>： 选择X的子元素中满足Y选择器的元素，兼容性： IE7+</li>
<li><strong>X ~ Y兄弟</strong>： 选择<strong>X之后所有兄弟节点</strong>中满足Y选择器的元素，兼容性： IE7+</li>
<li><strong>[attr]</strong>：选择所有设置了attr属性的元素，兼容性IE7+</li>
<li><strong>[attr=value]</strong>：选择属性值刚好为value的元素</li>
<li><strong>[attr~=value]</strong>：选择属性值为空白符分隔，其中一个的值刚好是value的元素</li>
<li><strong>[attr|=value]</strong>：选择属性值刚好为value或者value-开头的元素</li>
<li><strong>[attr^=value]</strong>：选择属性值以value开头的元素</li>
<li><strong>[attr$=value]</strong>：选择属性值以value结尾的元素</li>
<li><strong>[attr*=value]</strong>：选择属性值中包含value的元素</li>
<li><strong>[:checked]</strong>：选择单选框，复选框，下拉框中选中状态下的元素，兼容性：IE9+</li>
<li><strong>X:after, X::after</strong>：after伪元素，选择元素虚拟子元素（元素的最后一个子元素），CSS3中::表示伪元素。兼容性:after为IE8+，::after为IE9+</li>
<li><strong>:hover</strong>：鼠标移入状态的元素，兼容性a标签IE4+， 所有元素IE7+</li>
<li><strong>:not(selector)</strong>：选择不符合selector的元素。<strong>不参与计算优先级</strong>，兼容性：IE9+</li>
<li><strong>::first-letter</strong>：伪元素，选择块元素第一行的第一个字母，兼容性IE5.5+</li>
<li><strong>::first-line</strong>：伪元素，选择块元素的第一行，兼容性IE5.5+</li>
<li><strong>:nth-child(an + b)</strong>：伪类，选择前面有an + b - 1个兄弟节点的元素，其中n<br>&gt;= 0， 兼容性IE9+</li>
<li><strong>:nth-last-child(an + b)</strong>：伪类，选择后面有an + b - 1个兄弟节点的元素<br>其中n &gt;= 0，兼容性IE9+</li>
<li><strong>X:nth-of-type(an+b)</strong>：伪类，X为选择器，<strong>解析得到元素标签</strong>，选择<strong>前面</strong>有an + b - 1个<strong>相同标签</strong>兄弟节点的元素。兼容性IE9+</li>
<li><strong>X:nth-last-of-type(an+b)</strong>：伪类，X为选择器，解析得到元素标签，选择<strong>后面</strong>有an+b-1个相同<strong>标签</strong>兄弟节点的元素。兼容性IE9+</li>
<li><strong>X:first-child</strong>：伪类，选择满足X选择器的元素，且这个元素是其父节点的第一个子元素。兼容性IE7+</li>
<li><strong>X:last-child</strong>：伪类，选择满足X选择器的元素，且这个元素是其父节点的最后一个子元素。兼容性IE9+</li>
<li><strong>X:only-child</strong>：伪类，选择满足X选择器的元素，且这个元素是其父元素的唯一子元素。兼容性IE9+</li>
<li><strong>X:only-of-type</strong>：伪类，选择X选择的元素，<strong>解析得到元素标签</strong>，如果该元素没有相同类型的兄弟节点时选中它。兼容性IE9+</li>
<li><strong>X:first-of-type</strong>：伪类，选择X选择的元素，<strong>解析得到元素标签</strong>，如果该元素<br>是此此类型元素的第一个兄弟。选中它。兼容性IE9+</li>
</ol>
<h3 id="css_sprite是什么,有什么优缺点">css sprite是什么,有什么优缺点</h3><p>概念：将多个小图片拼接到一个图片中。通过background-position和元素尺寸调节需要显示的背景图案。</p>
<p>优点：</p>
<ol>
<li>减少HTTP请求数，极大地提高页面加载速度</li>
<li>增加图片信息重复度，提高压缩比，减少图片大小</li>
<li>更换风格方便，只需在一张或几张图片上修改颜色或样式即可实现</li>
</ol>
<p>缺点：</p>
<ol>
<li>图片合并麻烦</li>
<li>维护麻烦，修改一个图片可能需要从新布局整个图片，样式</li>
</ol>
<h3 id="display:_none;与visibility:_hidden;的区别"><code>display: none;</code>与<code>visibility: hidden;</code>的区别</h3><p>联系：它们都能让元素不可见</p>
<p>区别：</p>
<ol>
<li>display:none;会让元素完全从渲染树中消失，渲染的时候不占据任何空间；visibility: hidden;不会让元素从渲染树消失，渲染师元素继续占据空间，只是内容不可见</li>
<li>display: none;是非继承属性，子孙节点消失由于元素从渲染树消失造成，通过修改子孙节点属性无法显示；visibility: hidden;是继承属性，子孙节点消失由于继承了hidden，通过设置visibility: visible;可以让子孙节点显式</li>
<li>修改常规流中元素的display通常会造成文档重排。修改visibility属性只会造成本元素的重绘。</li>
<li>读屏器不会读取display: none;元素内容；会读取visibility: hidden;元素内容</li>
</ol>
<h3 id="css_hack原理及常用hack">css hack原理及常用hack</h3><p>原理：利用<strong>不同浏览器对CSS的支持和解析结果不一样</strong>编写针对特定浏览器样式。常见的hack有1）属性hack。2）选择器hack。3）IE条件注释</p>
<ul>
<li>IE条件注释：适用于[IE5, IE9]常见格式如下</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--[if IE 6]&gt;</span><br><span class="line">Special instructions for IE 6 here</span><br><span class="line">&lt;![endif]--&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>选择器hack：不同浏览器对选择器的支持不一样</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***** Selector Hacks ******/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE6 and below */</span></span><br><span class="line">* <span class="tag">html</span> <span class="id">#uno</span>  &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE7 */</span></span><br><span class="line">*<span class="pseudo">:first-child</span>+<span class="tag">html</span> <span class="id">#dos</span> &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE7, FF, Saf, Opera  */</span></span><br><span class="line"><span class="tag">html</span>&gt;<span class="tag">body</span> <span class="id">#tres</span> &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE8, FF, Saf, Opera (Everything but IE 6,7) */</span></span><br><span class="line"><span class="tag">html</span>&gt;<span class="comment">/**/</span><span class="tag">body</span> <span class="id">#cuatro</span> &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Opera 9.27 and below, safari 2 */</span></span><br><span class="line"><span class="tag">html</span><span class="pseudo">:first-child</span> <span class="id">#cinco</span> &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Safari 2-3 */</span></span><br><span class="line"><span class="tag">html</span><span class="attr_selector">[xmlns*=""]</span> <span class="tag">body</span><span class="pseudo">:last-child</span> <span class="id">#seis</span> &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* safari 3+, chrome 1+, opera9+, ff 3.5+ */</span></span><br><span class="line"><span class="tag">body</span><span class="pseudo">:nth-of-type</span>(<span class="number">1</span>) <span class="id">#siete</span> &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* safari 3+, chrome 1+, opera9+, ff 3.5+ */</span></span><br><span class="line"><span class="tag">body</span><span class="pseudo">:first-of-type</span> <span class="id">#ocho</span> &#123;  <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* saf3+, chrome1+ */</span></span><br><span class="line">@<span class="tag">media</span> <span class="tag">screen</span> <span class="tag">and</span> (<span class="attribute">-webkit-min-device-pixel-ratio</span>:<span class="number">0</span>) &#123;</span><br><span class="line"> <span class="id">#diez</span>  &#123; <span class="tag">color</span>: <span class="tag">red</span>  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* iPhone / mobile webkit */</span></span><br><span class="line">@<span class="tag">media</span> <span class="tag">screen</span> <span class="tag">and</span> (<span class="attribute">max-device-width</span>: <span class="number">480px</span>) &#123;</span><br><span class="line"> <span class="id">#veintiseis</span> &#123; <span class="tag">color</span>: <span class="tag">red</span>  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Safari 2 - 3.1 */</span></span><br><span class="line"><span class="tag">html</span><span class="attr_selector">[xmlns*=""]</span><span class="pseudo">:root</span> <span class="id">#trece</span>  &#123; <span class="tag">color</span>: <span class="tag">red</span>  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Safari 2 - 3.1, Opera 9.25 */</span></span><br><span class="line">*|<span class="tag">html</span><span class="attr_selector">[xmlns*=""]</span> <span class="id">#catorce</span> &#123; <span class="tag">color</span>: <span class="tag">red</span>  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Everything but IE6-8 */</span></span><br><span class="line"><span class="pseudo">:root</span> *&gt; <span class="id">#quince</span> &#123; <span class="tag">color</span>: <span class="tag">red</span>  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE7 */</span></span><br><span class="line">*+<span class="tag">html</span> <span class="id">#dieciocho</span> &#123;  <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Firefox only. 1+ */</span></span><br><span class="line"><span class="id">#veinticuatro</span>,  <span class="tag">x</span><span class="pseudo">:-moz-any-link</span>  &#123; <span class="tag">color</span>: <span class="tag">red</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Firefox 3.0+ */</span></span><br><span class="line"><span class="id">#veinticinco</span>,  <span class="tag">x</span><span class="pseudo">:-moz-any-link</span>, <span class="tag">x</span><span class="pseudo">:default</span>  &#123; <span class="attribute">color</span>: red  &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>属性hack：不同浏览器解析bug或方法</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* IE6 */</span></span><br><span class="line"><span class="id">#once</span> &#123; <span class="tag">_color</span>: <span class="tag">blue</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE6, IE7 */</span></span><br><span class="line"><span class="id">#doce</span> &#123; *<span class="attribute">color</span>: blue; <span class="comment">/* or #color: blue */</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* Everything but IE6 */</span></span><br><span class="line"><span class="id">#diecisiete</span> &#123; <span class="tag">color</span><span class="comment">/**/</span>: <span class="tag">blue</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE6, IE7, IE8 */</span></span><br><span class="line"><span class="id">#diecinueve</span> &#123; <span class="attribute">color</span>: blue\<span class="number">9</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE7, IE8 */</span></span><br><span class="line"><span class="id">#veinte</span> &#123; <span class="attribute">color<span class="comment">/*\**/</span></span>: blue\<span class="number">9</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* IE6, IE7 -- acts as an !important */</span></span><br><span class="line"><span class="id">#veintesiete</span> &#123; <span class="attribute">color</span>: blue !ie; &#125; <span class="comment">/* string after ! can be anything */</span></span><br></pre></td></tr></table></figure>
<h3 id="specified_value,computed_value,used_value计算方法">specified value,computed value,used value计算方法</h3><ul>
<li><p>specified value: 计算方法如下：</p>
<ul>
<li>如果样式表设置了一个值，使用这个值</li>
<li>如果没有设置值，这个属性是继承属性，从父元素继承</li>
<li>如果没设置，并且不是继承属性，使用css规范指定的初始值</li>
</ul>
</li>
<li><p>computed value: 以specified value根据规范定义的行为进行计算，通常将相对值计算为绝对值，例如em根据font-size进行计算。一些使用百分数并且需要布局来决定最终值的属性，如width，margin。百分数就直接作为computed value。line-height的无单位值也直接作为computed value。这些值将在计算used value时得到绝对值。<strong>computed value的主要作用是用于继承</strong></p>
</li>
<li><p>used value：属性计算后的最终值，对于大多数属性可以通过window.getComputedStyle获得，尺寸值单位为像素。以下属性依赖于布局，</p>
<ul>
<li>background-position</li>
<li>bottom, left, right, top</li>
<li>height, width</li>
<li>margin-bottom, margin-left, margin-right, margin-top</li>
<li>min-height, min-width</li>
<li>padding-bottom, padding-left, padding-right, padding-top</li>
<li>text-indent</li>
</ul>
</li>
</ul>
<h3 id="link与@import的区别"><code>link</code>与<code>@import</code>的区别</h3><ul>
<li><code>link</code>是HTML方式， <code>@import</code>是CSS方式</li>
<li><code>link</code>最大限度支持并行下载，<code>@import</code>过多嵌套导致串行下载，出现<a href="http://www.bluerobot.com/web/css/fouc.asp/" target="_blank" rel="external">FOUC</a></li>
<li><code>link</code>可以通过<code>rel=&quot;alternate stylesheet&quot;</code>指定候选样式</li>
<li>浏览器对<code>link</code>支持早于<code>@import</code>，可以使用<code>@import</code>对老浏览器隐藏样式</li>
<li><code>@import</code>必须在样式规则之前，可以在css文件中引用其他文件</li>
<li>总体来说：<strong><a href="http://www.stevesouders.com/blog/2009/04/09/dont-use-import/" target="_blank" rel="external">link优于@import</a></strong></li>
</ul>
<h3 id="display:_block;和display:_inline;的区别"><code>display: block;</code>和<code>display: inline;</code>的区别</h3><p><code>block</code>元素特点：</p>
<ul>
<li>处于常规流中时，如果<code>width</code>没有设置，会自动填充满父容器</li>
<li>可以应用<code>margin/padding</code></li>
<li>在没有设置高度的情况下会扩展高度以包含常规流中的子元素</li>
<li>处于常规流中时布局时在前后元素位置之间（独占一个水平空间）</li>
<li>忽略<code>vertical-align</code></li>
</ul>
<p><code>inline</code>元素特点</p>
<ul>
<li>水平方向上根据<code>direction</code>依次布局</li>
<li>不会在元素前后进行换行</li>
<li>受<code>white-space</code>控制</li>
<li><code>margin/padding</code>在竖直方向上无效，水平方向上有效</li>
<li><code>width/height</code>属性对非替换行内元素无效，宽度由元素内容决定</li>
<li>非替换行内元素的行框高由<code>line-height</code>确定，替换行内元素的行框高由<code>height</code>,<code>margin</code>,<code>padding</code>,<code>border</code>决定</li>
<li>浮动或绝对定位时会转换为<code>block</code></li>
<li><code>vertical-align</code>属性生效</li>
</ul>
<h3 id="PNG,GIF,JPG的区别及如何选">PNG,GIF,JPG的区别及如何选</h3><p>参考资料： <a href="http://www.yuiblog.com/blog/2008/11/04/imageopt-2/" target="_blank" rel="external">选择正确的图片格式</a><br><strong>GIF</strong>:</p>
<ol>
<li>8位像素，256色</li>
<li>无损压缩</li>
<li>支持简单动画</li>
<li>支持boolean透明</li>
<li>适合简单动画</li>
</ol>
<p><strong>JPEG</strong>：</p>
<ol>
<li>颜色限于256</li>
<li>有损压缩</li>
<li>可控制压缩质量</li>
<li>不支持透明</li>
<li>适合照片</li>
</ol>
<p><strong>PNG</strong>：</p>
<ol>
<li>有PNG8和truecolor PNG</li>
<li>PNG8类似GIF颜色上限为256，文件小，支持alpha透明度，无动画</li>
<li>适合图标、背景、按钮</li>
</ol>
<h3 id="CSS有哪些继承属性">CSS有哪些继承属性</h3><ul>
<li>关于文字排版的属性如：<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font" target="_blank" rel="external">font</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/word-break" target="_blank" rel="external">word-break</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/letter-spacing" target="_blank" rel="external">letter-spacing</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-align" target="_blank" rel="external">text-align</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-rendering" target="_blank" rel="external">text-rendering</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/word-spacing" target="_blank" rel="external">word-spacing</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/white-space" target="_blank" rel="external">white-space</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-indent" target="_blank" rel="external">text-indent</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-transform" target="_blank" rel="external">text-transform</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/text-shadow" target="_blank" rel="external">text-shadow</a></li>
</ul>
</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/line-height" target="_blank" rel="external">line-height</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/color" target="_blank" rel="external">color</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/visibility" target="_blank" rel="external">visibility</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/cursor" target="_blank" rel="external">cursor</a></li>
</ul>
<h3 id="IE6浏览器有哪些常见的bug,缺陷或者与标准不一致的地方,如何解决">IE6浏览器有哪些常见的bug,缺陷或者与标准不一致的地方,如何解决</h3><ul>
<li>IE6不支持min-height，解决办法使用css hack：</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.target</span> &#123;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto !important;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100px</span>;   <span class="comment">// IE6下内容高度超过会自动扩展高度</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><code>ol</code>内<code>li</code>的序号全为1，不递增。解决方法：为li设置样式<code>display: list-item;</code></p>
</li>
<li><p>未定位父元素<code>overflow: auto;</code>，包含<code>position: relative;</code>子元素，子元素高于父元素时会溢出。解决办法：1）子元素去掉<code>position: relative;</code>; 2）不能为子元素去掉定位时，父元素<code>position: relative;</code></p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line"><span class="class">.outer</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">215px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid red</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">overflow</span>:<span class="value"> auto</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;  <span class="comment">/* 修复bug */</span></span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.inner</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">200px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> purple</span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"outer"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"inner"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>IE6只支持<code>a</code>标签的<code>:hover</code>伪类，解决方法：使用js为元素监听mouseenter，mouseleave事件，添加类实现效果：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span><br><span class="line"><span class="rule"><span class="attribute">.p</span>:<span class="value">hover,</span><br><span class="line">.hover &#123;</span><br><span class="line">    background: purple</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"p"</span> <span class="attribute">id</span>=<span class="value">"target"</span>&gt;</span>aaaa bbbbb<span class="tag">&lt;<span class="title">span</span>&gt;</span>DDDDDDDDDDDd<span class="tag">&lt;/<span class="title">span</span>&gt;</span> aaaa lkjlkjdf j<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">elem, cls</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (elem.className) &#123;</span><br><span class="line">        elem.className += <span class="string">' '</span> + cls;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        elem.className = cls;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">elem, cls</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> className = <span class="string">' '</span> + elem.className + <span class="string">' '</span>;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">' +'</span> + cls + <span class="string">' +'</span>, <span class="string">'g'</span>);</span><br><span class="line">    elem.className = className.replace(reg, <span class="string">' '</span>).replace(<span class="regexp">/^ +| +$/</span>, <span class="string">''</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> target = <span class="built_in">document</span>.getElementById(<span class="string">'target'</span>);</span><br><span class="line"><span class="keyword">if</span> (target.attachEvent) &#123;</span><br><span class="line">    target.attachEvent(<span class="string">'onmouseenter'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        addClass(target, <span class="string">'hover'</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    target.attachEvent(<span class="string">'onmouseleave'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        removeClass(target, <span class="string">'hover'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>IE5-8不支持<code>opacity</code>，解决办法：</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class">.opacity</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">opacity</span>:<span class="value"> <span class="number">0.4</span></span><br><span class="line">    filter: <span class="function">alpha</span>(opacity=<span class="number">60</span>)</span></span>; <span class="comment">/* for IE5-7 */</span></span><br><span class="line">    <span class="rule"><span class="attribute">-ms-filter</span>:<span class="value"> <span class="string">"progid:DXImageTransform.Microsoft.Alpha(Opacity=60)"</span></span></span>; <span class="comment">/* for IE 8*/</span></span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>IE6在设置<code>height</code>小于<code>font-size</code>时高度值为<code>font-size</code>，解决办法：<code>font-size: 0;</code></li>
<li>IE6不支持PNG透明背景，解决办法: <strong>IE6下使用gif图片</strong></li>
<li>IE6-7不支持<code>display: inline-block</code>解决办法：设置inline并触发hasLayout</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="rule"><span class="attribute">display</span>:<span class="value"> inline-block</span></span>;</span><br><span class="line">*<span class="rule"><span class="attribute">display</span>:<span class="value"> inline</span></span>;</span><br><span class="line">*<span class="rule"><span class="attribute">zoom</span>:<span class="value"> <span class="number">1</span></span></span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>IE6下浮动元素在浮动方向上与父元素边界接触元素的外边距会加倍。解决办法：<br>1）使用padding控制间距。<br>2）浮动元素<code>display: inline;</code>这样解决问题且无任何副作用：css标准规定浮动元素display:inline会自动调整为block</li>
<li>通过为块级元素设置宽度和左右margin为auto时，IE6不能实现水平居中，解决方法：为父元素设置<code>text-align: center;</code></li>
</ul>
<h3 id="容器包含若干浮动元素时如何清理(包含)浮动">容器包含若干浮动元素时如何清理(包含)浮动</h3><ol>
<li>容器元素闭合标签前添加额外元素并设置<code>clear: both</code></li>
<li>父元素触发块级格式化上下文(见块级可视化上下文部分)</li>
<li>设置容器元素伪元素进行清理<a href="http://nicolasgallagher.com/micro-clearfix-hack/" target="_blank" rel="external">推荐的清理浮动方法</a></li>
</ol>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/<span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line"><span class="keyword">*</span> 在标准浏览器下使用</span><br><span class="line"><span class="keyword">*</span> 1 content内容为空格用于修复opera下文档中出现</span><br><span class="line"><span class="keyword">*</span>   contenteditable属性时在清理浮动元素上下的空白</span><br><span class="line"><span class="keyword">*</span> 2 使用display使用table而不是block：可以防止容器和</span><br><span class="line"><span class="keyword">*</span>   子元素top-margin折叠,这样能使清理效果与BFC，IE6/7</span><br><span class="line"><span class="keyword">*</span>   zoom: 1;一致</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>/</span><br><span class="line"></span><br><span class="line">.clearfix:before,</span><br><span class="line">.clearfix:after &#123;</span><br><span class="line">    content: <span class="string">" "</span>; /<span class="keyword">*</span> 1 <span class="keyword">*</span>/</span><br><span class="line">    display: table; /<span class="keyword">*</span> 2 <span class="keyword">*</span>/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.clearfix:after &#123;</span><br><span class="line">    clear: both;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/<span class="keyword">*</span><span class="keyword">*</span></span><br><span class="line"><span class="keyword">*</span> IE 6/7下使用</span><br><span class="line"><span class="keyword">*</span> 通过触发hasLayout实现包含浮动</span><br><span class="line"><span class="keyword">*</span><span class="keyword">*</span>/</span><br><span class="line">.clearfix &#123;</span><br><span class="line">    <span class="keyword">*</span>zoom: 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="什么是FOUC?如何避免">什么是FOUC?如何避免</h3><p>Flash Of Unstyled Content：用户定义样式表加载之前浏览器使用默认样式显示文档，用户样式加载渲染之后再从新显示文档，造成页面闪烁。<strong>解决方法</strong>：把样式表放到文档的<code>head</code></p>
<h3 id="如何创建块级格式化上下文(block_formatting_context),BFC有什么用">如何创建块级格式化上下文(block formatting context),BFC有什么用</h3><p>创建规则：</p>
<ol>
<li>根元素</li>
<li>浮动元素（<code>float</code>不是<code>none</code>）</li>
<li>绝对定位元素（<code>position</code>取值为<code>absolute</code>或<code>fixed</code>）</li>
<li><code>display</code>取值为<code>inline-block</code>,<code>table-cell</code>, <code>table-caption</code>,<code>flex</code>, <code>inline-flex</code>之一的元素</li>
<li><code>overflow</code>不是<code>visible</code>的元素</li>
</ol>
<p>作用：</p>
<ol>
<li>可以包含浮动元素</li>
<li>不被浮动元素覆盖</li>
<li>阻止父子元素的margin折叠</li>
</ol>
<h3 id="display,float,position的关系">display,float,position的关系</h3><ol>
<li>如果<code>display</code>为none，那么position和float都不起作用，这种情况下元素不产生框</li>
<li>否则，如果position值为absolute或者fixed，框就是绝对定位的，float的计算值为none，display根据下面的表格进行调整。</li>
<li>否则，如果float不是none，框是浮动的，display根据下表进行调整</li>
<li>否则，如果元素是根元素，display根据下表进行调整</li>
<li>其他情况下display的值为指定值<br>总结起来：<strong>绝对定位、浮动、根元素都需要调整<code>display</code></strong><br><img src="/images/fe/display-adjust.png" alt="display转换规则"></li>
</ol>
<h3 id="外边距折叠(collapsing_margins)">外边距折叠(collapsing margins)</h3><p>毗邻的两个或多个<code>margin</code>会合并成一个margin，叫做外边距折叠。规则如下：</p>
<ol>
<li>两个或多个毗邻的普通流中的块元素垂直方向上的margin会折叠</li>
<li>浮动元素/inline-block元素/绝对定位元素的margin不会和垂直方向上的其他元素的margin折叠</li>
<li>创建了块级格式化上下文的元素，不会和它的子元素发生margin折叠</li>
<li>元素自身的margin-bottom和margin-top相邻时也会折叠</li>
</ol>
<h3 id="如何确定一个元素的包含块(containing_block)">如何确定一个元素的包含块(containing block)</h3><ol>
<li>根元素的包含块叫做初始包含块，在连续媒体中他的尺寸与viewport相同并且anchored at the canvas origin；对于paged media，它的尺寸等于page area。初始包含块的direction属性与根元素相同。</li>
<li><code>position</code>为<code>relative</code>或者<code>static</code>的元素，它的包含块由最近的块级（<code>display</code>为<code>block</code>,<code>list-item</code>, <code>table</code>）祖先元素的<strong>内容框</strong>组成</li>
<li>如果元素<code>position</code>为<code>fixed</code>。对于连续媒体，它的包含块为viewport；对于paged media，包含块为page area</li>
<li><p>如果元素<code>position</code>为<code>absolute</code>，它的包含块由祖先元素中最近一个<code>position</code>为<code>relative</code>,<code>absolute</code>或者<code>fixed</code>的元素产生，规则如下：</p>
<ul>
<li>如果祖先元素为行内元素，the containing block is the bounding box around the <strong>padding boxes</strong> of the first and the last inline boxes generated for that element.</li>
<li><p>其他情况下包含块由祖先节点的<strong>padding edge</strong>组成</p>
<p>如果找不到定位的祖先元素，包含块为<strong>初始包含块</strong></p>
</li>
</ul>
</li>
</ol>
<h3 id="stacking_context,布局规则">stacking context,布局规则</h3><p>z轴上的默认层叠顺序如下（从下到上）：</p>
<ol>
<li>根元素的边界和背景</li>
<li>常规流中的元素按照html中顺序</li>
<li>浮动块</li>
<li>positioned元素按照html中出现顺序</li>
</ol>
<p>如何创建stacking context：</p>
<ol>
<li>根元素</li>
<li>z-index不为auto的定位元素</li>
<li>a flex item with a z-index value other than ‘auto’</li>
<li>opacity小于1的元素</li>
<li>在移动端webkit和chrome22+，z-index为auto，position: fixed也将创建新的stacking context</li>
</ol>
<h3 id="如何水平居中一个元素">如何水平居中一个元素</h3><ul>
<li>如果需要居中的元素为<strong>常规流中inline元素</strong>，为父元素设置<code>text-align: center;</code>即可实现</li>
<li>如果需要居中的元素为<strong>常规流中block元素</strong>，1）为元素设置宽度，2）设置左右margin为auto。3）IE6下需在父元素上设置<code>text-align: center;</code>,再给子元素恢复需要的值</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span></span><br><span class="line">    aaaaaa aaaaaa a a a a a a a a</span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">    <span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#DDD</span></span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">text-align</span>:<span class="value"> center</span></span>; <span class="comment">/* 3 */</span></span><br><span class="line">    &#125;</span></span><br><span class="line">    <span class="class">.content</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">500px</span></span></span>;      <span class="comment">/* 1 */</span></span><br><span class="line">        <span class="rule"><span class="attribute">text-align</span>:<span class="value"> left</span></span>;  <span class="comment">/* 3 */</span></span><br><span class="line">        <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;    <span class="comment">/* 2 */</span></span><br><span class="line"></span><br><span class="line">        <span class="rule"><span class="attribute">background</span>:<span class="value"> purple</span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果需要居中的元素为<strong>浮动元素</strong>，1）为元素设置宽度，2）<code>position: relative;</code>，3）浮动方向偏移量（left或者right）设置为50%，4）浮动方向上的margin设置为元素宽度一半乘以-1</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span></span><br><span class="line">    aaaaaa aaaaaa a a a a a a a a</span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">    <span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#DDD</span></span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line">    <span class="class">.content</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">500px</span></span></span>;         <span class="comment">/* 1 */</span></span><br><span class="line">        <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;   <span class="comment">/* 2 */</span></span><br><span class="line">        <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;            <span class="comment">/* 3 */</span></span><br><span class="line">        <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">250px</span></span></span>;  <span class="comment">/* 4 */</span></span><br><span class="line"></span><br><span class="line">        <span class="rule"><span class="attribute">background-color</span>:<span class="value"> purple</span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果需要居中的元素为<strong>绝对定位元素</strong>，1）为元素设置宽度，2）偏移量设置为50%，3）偏移方向外边距设置为元素宽度一半乘以-1</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span></span><br><span class="line">    aaaaaa aaaaaa a a a a a a a a</span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">    <span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#DDD</span></span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line">    <span class="class">.content</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">800px</span></span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">50%</span></span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">margin-left</span>:<span class="value"> -<span class="number">400px</span></span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="rule"><span class="attribute">background-color</span>:<span class="value"> purple</span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>如果需要居中的元素为<strong>绝对定位元素</strong>，1）为元素设置宽度，2）设置左右偏移量都为0,3）设置左右外边距都为auto</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span></span><br><span class="line">    aaaaaa aaaaaa a a a a a a a a</span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line">    <span class="tag">body</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#DDD</span></span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">position</span>:<span class="value"> relative</span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line">    <span class="class">.content</span> <span class="rules">&#123;</span><br><span class="line">        <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">800px</span></span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> auto</span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">        <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="rule"><span class="attribute">background-color</span>:<span class="value"> purple</span></span>;</span><br><span class="line">    &#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="如何竖直居中一个元素">如何竖直居中一个元素</h3><p>参考资料：<a href="http://www.vanseodesign.com/css/vertical-centering/" target="_blank" rel="external">6 Methods For Vertical Centering With CSS</a>。 <a href="http://blog.csdn.net/freshlover/article/details/11579669" target="_blank" rel="external">盘点8种CSS实现垂直居中</a></p>
<ul>
<li>需要居中元素为<strong>单行文本</strong>，为包含文本的元素设置大于<code>font-size</code>的<code>line-height</code>：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">p</span> <span class="attribute">class</span>=<span class="value">"text"</span>&gt;</span>center text<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="class">.text</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">line-height</span>:<span class="value"> <span class="number">200px</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="$javascript概念部分">$javascript概念部分</h2><h3 id="DOM元素e的e-getAttribute(propName)和e-propName有什么区别和联系">DOM元素e的e.getAttribute(propName)和e.propName有什么区别和联系</h3><ul>
<li>e.getAttribute()，是标准DOM操作文档元素属性的方法，具有通用性可在任意文档上使用，返回元素在源文件中<strong>设置的属性</strong></li>
<li>e.propName通常是在HTML文档中访问特定元素的<strong>特性</strong>，浏览器解析元素后生成对应对象（如a标签生成HTMLAnchorElement），这些对象的特性会根据特定规则结合属性设置得到，对于没有对应特性的属性，只能使用getAttribute进行访问</li>
<li>e.getAttribute()返回值是源文件中设置的值，类型是字符串或者null（有的实现返回””）</li>
<li>e.propName返回值可能是字符串、布尔值、对象、undefined等</li>
<li>大部分attribute与property是一一对应关系，修改其中一个会影响另一个，如id，title等属性</li>
<li>一些布尔属性<code>&lt;input hidden/&gt;</code>的检测设置需要hasAttribute和removeAttribute来完成，或者设置对应property</li>
<li>像<code>&lt;a href=&quot;../index.html&quot;&gt;link&lt;/a&gt;</code>中href属性，转换成property的时候需要通过转换得到完整URL</li>
<li>一些attribute和property不是一一对应如：form控件中<code>&lt;input value=&quot;hello&quot;/&gt;</code>对应的是defaultValue，修改或设置value property修改的是控件当前值，setAttribute修改value属性不会改变value property</li>
</ul>
<h3 id="offsetWidth/offsetHeight,clientWidth/clientHeight与scrollWidth/scrollHeight的区别">offsetWidth/offsetHeight,clientWidth/clientHeight与scrollWidth/scrollHeight的区别</h3><ul>
<li>offsetWidth/offsetHeight返回值包含<strong>content + padding + border</strong>，效果与e.getBoundingClientRect()相同</li>
<li>clientWidth/clientHeight返回值只包含<strong>content + padding</strong>，如果有滚动条，也<strong>不包含滚动条</strong></li>
<li>scrollWidth/scrollHeight返回值包含<strong>content + padding + 溢出内容的尺寸</strong></li>
</ul>
<p><a href="http://msdn.microsoft.com/en-us/library/ie/hh781509(v=vs.85" target="_blank" rel="external">Measuring Element Dimension and Location with CSSOM in Windows Internet Explorer 9</a>.aspx)</p>
<p><img src="/images/fe/element-size.png" alt="元素尺寸"></p>
<h3 id="XMLHttpRequest通用属性和方法">XMLHttpRequest通用属性和方法</h3><ol>
<li><code>readyState</code>:表示请求状态的整数，取值：<ul>
<li>UNSENT（0）：对象已创建</li>
<li>OPENED（1）：open()成功调用，在这个状态下，可以为xhr设置请求头，或者使用send()发送请求</li>
<li>HEADERS_RECEIVED(2)：所有重定向已经自动完成访问，并且最终响应的HTTP头已经收到</li>
<li>LOADING(3)：响应体正在接收</li>
<li>DONE(4)：数据传输完成或者传输产生错误</li>
</ul>
</li>
<li><code>onreadystatechange</code>：readyState改变时调用的函数</li>
<li><code>status</code>：服务器返回的HTTP状态码（如，200， 404）</li>
<li><code>statusText</code>:服务器返回的HTTP状态信息（如，OK，No Content）</li>
<li><code>responseText</code>:作为字符串形式的来自服务器的完整响应</li>
<li><code>responseXML</code>: Document对象，表示服务器的响应解析成的XML文档</li>
<li><code>abort()</code>:取消异步HTTP请求</li>
<li><code>getAllResponseHeaders()</code>: 返回一个字符串，包含响应中服务器发送的全部HTTP报头。每个报头都是一个用冒号分隔开的名/值对，并且使用一个回车/换行来分隔报头行</li>
<li><code>getResponseHeader(headerName)</code>:返回headName对应的报头值</li>
<li><code>open(method, url, asynchronous [, user, password])</code>:初始化准备发送到服务器上的请求。method是HTTP方法，不区分大小写；url是请求发送的相对或绝对URL；asynchronous表示请求是否异步；user和password提供身份验证</li>
<li><code>setRequestHeader(name, value)</code>:设置HTTP报头</li>
<li><code>send(body)</code>:对服务器请求进行初始化。参数body包含请求的主体部分，对于POST请求为键值对字符串；对于GET请求，为null</li>
</ol>
<h3 id="focus/blur与focusin/focusout的区别与联系">focus/blur与focusin/focusout的区别与联系</h3><ol>
<li>focus/blur不冒泡，focusin/focusout冒泡</li>
<li>focus/blur兼容性好，focusin/focusout在除FireFox外的浏览器下都保持良好兼容性，如需使用事件托管，可考虑在FireFox下使用事件捕获elem.addEventListener(‘focus’, handler, true)</li>
<li>可获得焦点的元素：<ol>
<li>window</li>
<li>链接被点击或键盘操作</li>
<li>表单空间被点击或键盘操作</li>
<li>设置<code>tabindex</code>属性的元素被点击或键盘操作</li>
</ol>
</li>
</ol>
<h3 id="mouseover/mouseout与mouseenter/mouseleave的区别与联系">mouseover/mouseout与mouseenter/mouseleave的区别与联系</h3><ol>
<li>mouseover/mouseout是标准事件，<strong>所有浏览器都支持</strong>；mouseenter/mouseleave是IE5.5引入的特有事件后来被DOM3标准采纳，现代标准浏览器也支持</li>
<li>mouseover/mouseout是<strong>冒泡</strong>事件；mouseenter/mouseleave<strong>不冒泡</strong>。需要为<strong>多个元素监听鼠标移入/出事件时，推荐mouseover/mouseout托管，提高性能</strong></li>
<li>标准事件模型中event.target表示发生移入/出的元素,<strong>vent.relatedTarget</strong>对应移出/如元素；在老IE中event.srcElement表示发生移入/出的元素，<strong>event.toElement</strong>表示移出的目标元素，<strong>event.fromElement</strong>表示移入时的来源元素</li>
</ol>
<p>例子：鼠标从div#target元素移出时进行处理，判断逻辑如下：</p>
<pre><code><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"target"</span>&gt;</span><span class="tag">&lt;<span class="title">span</span>&gt;</span>test<span class="tag">&lt;/<span class="title">span</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
<span class="keyword">var</span> target = <span class="built_in">document</span>.getElementById(<span class="string">'target'</span>);
<span class="keyword">if</span> (target.addEventListener) {
  target.addEventListener(<span class="string">'mouseout'</span>, mouseoutHandler, <span class="literal">false</span>);
} <span class="keyword">else</span> <span class="keyword">if</span> (target.attachEvent) {
  target.attachEvent(<span class="string">'onmouseout'</span>, mouseoutHandler);
}

<span class="function"><span class="keyword">function</span> <span class="title">mouseoutHandler</span>(<span class="params">e</span>) </span>{
  e = e || <span class="built_in">window</span>.event;
  <span class="keyword">var</span> target = e.target || e.srcElement;

  <span class="comment">// 判断移出鼠标的元素是否为目标元素</span>
  <span class="keyword">if</span> (target.id !== <span class="string">'target'</span>) {
    <span class="keyword">return</span>;
  }

  <span class="comment">// 判断鼠标是移出元素还是移到子元素</span>
  <span class="keyword">var</span> relatedTarget = event.relatedTarget || e.toElement;
  <span class="keyword">while</span> (relatedTarget !== target
    &amp;&amp; relatedTarget.nodeName.toUpperCase() !== <span class="string">'BODY'</span>) {
    relatedTarget = relatedTarget.parentNode;
  }

  <span class="comment">// 如果相等，说明鼠标在元素内部移动</span>
  <span class="keyword">if</span> (relatedTarget === target) {
    <span class="keyword">return</span>;
  }

  <span class="comment">// 执行需要操作</span>
  <span class="comment">//alert('鼠标移出');</span>

}
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</code></pre><h3 id="sessionStorage,localStorage,cookie区别">sessionStorage,localStorage,cookie区别</h3><ol>
<li>都会在浏览器端保存，有大小限制，同源限制</li>
<li>cookie会在请求时发送到服务器，作为会话标识，服务器可修改cookie；web storage不会发送到服务器</li>
<li>cookie有path概念，子路径可以访问父路径cookie，父路径不能访问子路径cookie</li>
<li>有效期：cookie在设置的有效期内有效，默认为浏览器关闭；sessionStorage在窗口关闭前有效，localStorage长期有效，直到用户删除</li>
<li>共享：sessionStorage不能共享，localStorage在同源文档之间共享，cookie在同源且符合path规则的文档之间共享</li>
<li>localStorage的修改会促发其他文档窗口的update事件</li>
<li>cookie有secure属性要求HTTPS传输</li>
<li>浏览器不能保存超过300个cookie，单个服务器不能超过20个，每个cookie不能超过4k。web storage大小支持能达到5M</li>
</ol>
<h3 id="javascript跨域通信">javascript跨域通信</h3><p>同源：两个文档同源需满足</p>
<ol>
<li>协议相同</li>
<li>域名相同</li>
<li>端口相同</li>
</ol>
<p>跨域通信：js进行DOM操作、通信时如果目标与当前窗口不满足同源条件，浏览器为了安全会阻止跨域操作。跨域通信通常有以下方法</p>
<ul>
<li>如果是log之类的简单<strong>单项通信</strong>，新建<code>&lt;img&gt;</code>,<code>&lt;script&gt;</code>,<code>&lt;link&gt;</code>,<code>&lt;iframe&gt;</code>元素，通过src，href属性设置为目标url。实现跨域请求</li>
<li>如果请求<strong>json数据</strong>，使用<code>&lt;script&gt;</code>进行jsonp请求</li>
<li>现代浏览器中<strong>多窗口通信</strong>使用HTML5规范的targetWindow.postMessage(data, origin);其中data是需要发送的对象，origin是目标窗口的origin。window.addEventListener(‘message’, handler, false);handler的event.data是postMessage发送来的数据，event.origin是发送窗口的origin，event.source是发送消息的窗口引用</li>
<li>内部服务器代理请求跨域url，然后返回数据</li>
<li>跨域请求数据，现代浏览器可使用HTML5规范的CORS功能，只要目标服务器返回HTTP头部<strong><code>Access-Control-Allow-Origin: *</code></strong>即可像普通ajax一样访问跨域资源</li>
</ul>
<h3 id="javascript有哪几种数据类型">javascript有哪几种数据类型</h3><p>六种基本数据类型</p>
<ul>
<li>undefined</li>
<li>null</li>
<li>string</li>
<li>boolean</li>
<li>number</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Glossary/Symbol" target="_blank" rel="external">symbol</a>(ES6)</li>
</ul>
<p>一种引用类型</p>
<ul>
<li>Object</li>
</ul>
<h3 id="什么闭包,闭包有什么用">什么闭包,闭包有什么用</h3><p><strong>闭包是在某个作用域内定义的函数，它可以访问这个作用域内的所有变量</strong>。闭包作用域链通常包括三个部分：</p>
<ol>
<li>函数本身作用域。</li>
<li>闭包定义时的作用域。</li>
<li>全局作用域。</li>
</ol>
<p>闭包常见用途：</p>
<ol>
<li>创建特权方法用于访问控制</li>
<li>事件处理程序及回调</li>
</ol>
<h3 id="javascript有哪几种方法定义函数">javascript有哪几种方法定义函数</h3><ol>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function" target="_blank" rel="external">函数声明表达式</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function" target="_blank" rel="external">function操作符</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="external">Function 构造函数</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/arrow_functions" target="_blank" rel="external">ES6:arrow function</a></li>
</ol>
<p>重要参考资料：<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions_and_function_scope" target="_blank" rel="external">MDN:Functions_and_function_scope</a></p>
<h3 id="应用程序存储和离线web应用">应用程序存储和离线web应用</h3><p>HTML5新增应用程序缓存，允许web应用将应用程序自身保存到用户浏览器中，用户离线状态也能访问。<br>1.为html元素设置manifest属性:<code>&lt;html manifest=&quot;myapp.appcache&quot;&gt;</code>，其中后缀名只是一个约定，真正识别方式是通过<code>text/cache-manifest</code>作为MIME类型。所以需要配置服务器保证设置正确<br>2.manifest文件首行为<code>CACHE MANIFEST</code>，其余就是要缓存的URL列表，每个一行，相对路径都相对于manifest文件的url。注释以#开头<br>3.url分为三种类型：<code>CACHE</code>:为默认类型。<code>NETWORK</code>：表示资源从不缓存。 <code>FALLBACK</code>:每行包含两个url，第二个URL是指需要加载和存储在缓存中的资源， 第一个URL是一个前缀。任何匹配该前缀的URL都不会缓存，如果从网络中载入这样的URL失败的话，就会用第二个URL指定的缓存资源来替代。以下是一个文件例子：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CACHE MANIFEST</span><br><span class="line"></span><br><span class="line">CACHE:</span><br><span class="line">myapp<span class="class">.html</span></span><br><span class="line">myapp<span class="class">.css</span></span><br><span class="line">myapp<span class="class">.js</span></span><br><span class="line"></span><br><span class="line">FALLBACK:</span><br><span class="line">videos/ offline_help<span class="class">.html</span></span><br><span class="line"></span><br><span class="line">NETWORK:</span><br><span class="line">cgi/</span><br></pre></td></tr></table></figure>
<h3 id="客户端存储localStorage和sessionStorage">客户端存储localStorage和sessionStorage</h3><ul>
<li>localStorage有效期为永久，sessionStorage有效期为顶层窗口关闭前</li>
<li>同源文档可以读取并修改localStorage数据，sessionStorage只允许同一个窗口下的文档访问，如通过iframe引入的同源文档。</li>
<li>Storage对象通常被当做普通javascript对象使用：<strong>通过设置属性来存取字符串值</strong>，也可以通过<strong>setItem(key, value)设置</strong>，<strong>getItem(key)读取</strong>，<strong>removeItem(key)删除</strong>，<strong>clear()删除所有数据</strong>，<strong>length表示已存储的数据项数目</strong>，<strong>key(index)返回对应索引的key</strong></li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">'x'</span>, <span class="number">1</span>); <span class="comment">// storge x-&gt;1</span></span><br><span class="line">localStorage.getItem(<span class="string">'x'</span>); <span class="comment">// return value of x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 枚举所有存储的键值对</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, <span class="built_in">len</span> = localStorage.length; i &lt; <span class="built_in">len</span>; ++i ) &#123;</span><br><span class="line">    <span class="keyword">var</span> name = localStorage.key(i);</span><br><span class="line">    <span class="keyword">var</span> value = localStorage.getItem(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">localStorage.removeItem(<span class="string">'x'</span>); <span class="comment">// remove x</span></span><br><span class="line">localStorage.clear();  <span class="comment">// remove all data</span></span><br></pre></td></tr></table></figure>
<h3 id="cookie及其操作">cookie及其操作</h3><ul>
<li>cookie是web浏览器存储的少量数据，最早设计为服务器端使用，作为HTTP协议的扩展实现。cookie数据会自动在浏览器和服务器之间传输。</li>
<li>通过读写cookie检测是否支持</li>
<li>cookie属性有<strong>名</strong>，<strong>值</strong>，<strong>max-age</strong>，<strong>path</strong>, <strong>domain</strong>，<strong>secure</strong>；</li>
<li>cookie默认有效期为浏览器会话，一旦用户关闭浏览器，数据就丢失，通过设置<strong>max-age=seconds</strong>属性告诉浏览器cookie有效期</li>
<li>cookie作用域通过<strong>文档源</strong>和<strong>文档路径</strong>来确定，通过<strong>path</strong>和<strong>domain</strong>进行配置，web页面同目录或子目录文档都可访问</li>
<li>通过cookie保存数据的方法为：为document.cookie设置一个符合目标的字符串如下</li>
<li>读取document.cookie获得’; ‘分隔的字符串，key=value,解析得到结果</li>
</ul>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie = <span class="string">'name=qiu; max-age=9999; path=/; domain=domain; secure'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">'name=aaa; path=/; domain=domain; secure'</span>;</span><br><span class="line"><span class="comment">// 要改变cookie的值，需要使用相同的名字、路径和域，新的值</span></span><br><span class="line"><span class="comment">// 来设置cookie，同样的方法可以用来改变有效期</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置max-age为0可以删除指定cookie</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//读取cookie，访问document.cookie返回键值对组成的字符串，</span></span><br><span class="line"><span class="comment">//不同键值对之间用'; '分隔。通过解析获得需要的值</span></span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/qiu-deqing/google/blob/master/module/js/cookieUtil.js" target="_blank" rel="external">cookieUtil.js</a>：自己写的cookie操作工具</p>
<h3 id="javascript有哪些方法定义对象">javascript有哪些方法定义对象</h3><ol>
<li>对象字面量： <code>var obj = {};</code></li>
<li>构造函数： <code>var obj = new Object();</code></li>
<li>Object.create(): <code>var obj = Object.create(Object.prototype);</code></li>
</ol>
<h3 id="===运算符判断相等的流程是怎样的">===运算符判断相等的流程是怎样的</h3><ol>
<li>如果两个值不是相同类型，它们不相等</li>
<li>如果两个值都是null或者都是undefined，它们相等</li>
<li>如果两个值都是布尔类型true或者都是false，它们相等</li>
<li>如果其中有一个是<strong>NaN</strong>，它们不相等</li>
<li>如果都是数值型并且数值相等，他们相等， -0等于0</li>
<li>如果他们都是字符串并且在相同位置包含相同的16位值，他它们相等；如果在长度或者内容上不等，它们不相等；两个字符串显示结果相同但是编码不同==和===都认为他们不相等</li>
<li>如果他们指向相同对象、数组、函数，它们相等；如果指向不同对象，他们不相等</li>
</ol>
<h3 id="==运算符判断相等的流程是怎样的">==运算符判断相等的流程是怎样的</h3><ol>
<li>如果两个值类型相同，按照===比较方法进行比较</li>
<li>如果类型不同，使用如下规则进行比较<ol>
<li>如果其中一个值是null，另一个是undefined，它们相等</li>
<li>如果一个值是<strong>数字</strong>另一个是<strong>字符串</strong>，将<strong>字符串转换为数字</strong>进行比较</li>
<li>如果有布尔类型，将<strong>true转换为1，false转换为0</strong>，然后用==规则继续比较</li>
<li>如果一个值是对象，另一个是数字或字符串，将对象转换为原始值然后用==规则继续比较</li>
<li><strong>其他所有情况都认为不相等</strong></li>
</ol>
</li>
</ol>
<h3 id="对象到字符串的转换步骤">对象到字符串的转换步骤</h3><ol>
<li>如果对象有toString()方法，javascript调用它。如果返回一个原始值（primitive value如：string number boolean）,将这个值转换为字符串作为结果</li>
<li>如果对象没有toString()方法或者返回值不是原始值，javascript寻找对象的valueOf()方法，如果存在就调用它，返回结果是原始值则转为字符串作为结果</li>
<li>否则，javascript不能从toString()或者valueOf()获得一个原始值，此时throws a TypeError</li>
</ol>
<h3 id="对象到数字的转换步骤">对象到数字的转换步骤</h3><pre><code><span class="number">1</span>. 如果对象有<span class="function"><span class="title">valueOf</span><span class="params">()</span></span>方法并且返回元素值，javascript将返回值转换为数字作为结果
<span class="number">2</span>. 否则，如果对象有<span class="function"><span class="title">toString</span><span class="params">()</span></span>并且返回原始值，javascript将返回结果转换为数字作为结果
<span class="number">3</span>. 否则，throws <span class="tag">a</span> TypeError
</code></pre><h3 id="&lt;,&gt;,&lt;=,&gt;=的比较规则">&lt;,&gt;,&lt;=,&gt;=的比较规则</h3><p>所有比较运算符都支持任意类型，但是<strong>比较只支持数字和字符串</strong>，所以需要执行必要的转换然后进行比较，转换规则如下:</p>
<ol>
<li>如果操作数是对象，转换为原始值：如果valueOf方法返回原始值，则使用这个值，否则使用toString方法的结果，如果转换失败则报错</li>
<li>经过必要的对象到原始值的转换后，如果两个操作数都是字符串，按照字母顺序进行比较（他们的16位unicode值的大小）</li>
<li>否则，如果有一个操作数不是字符串，<strong>将两个操作数转换为数字</strong>进行比较</li>
</ol>
<h3 id="+运算符工作流程">+运算符工作流程</h3><ol>
<li>如果有操作数是对象，转换为原始值</li>
<li>此时如果有<strong>一个操作数是字符串</strong>，其他的操作数都转换为字符串并执行连接</li>
<li>否则：<strong>所有操作数都转换为数字并执行加法</strong></li>
</ol>
<h3 id="函数内部arguments变量有哪些特性,有哪些属性,如何将它转换为数组">函数内部arguments变量有哪些特性,有哪些属性,如何将它转换为数组</h3><ul>
<li>arguments所有函数中都包含的一个局部变量，是一个类数组对象，对应函数调用时的实参。如果函数定义同名参数会在调用时覆盖默认对象</li>
<li>arguments[index]分别对应函数调用时的实参，并且通过arguments修改实参时会同时修改实参</li>
<li>arguments.length为实参的个数（Function.length表示形参长度）</li>
<li>arguments.callee为当前正在执行的函数本身，使用这个属性进行递归调用时需注意this的变化</li>
<li>arguments.caller为调用当前函数的函数（已被遗弃）</li>
<li>转换为数组：<code>var args = Array.prototype.slice.call(arguments, 0);</code></li>
</ul>
<h3 id="DOM事件模型是如何的,编写一个EventUtil工具类实现事件管理兼容">DOM事件模型是如何的,编写一个EventUtil工具类实现事件管理兼容</h3><ul>
<li>DOM事件包含捕获（capture）和冒泡（bubble）两个阶段：捕获阶段事件从window开始触发事件然后通过祖先节点一次传递到触发事件的DOM元素上；冒泡阶段事件从初始元素依次向祖先节点传递直到window</li>
<li>标准事件监听elem.addEventListener(type, handler, capture)/elem.removeEventListener(type, handler, capture)：handler接收保存事件信息的event对象作为参数，event.target为触发事件的对象，handler调用上下文this为绑定监听器的对象，event.preventDefault()取消事件默认行为，event.stopPropagation()/event.stopImmediatePropagation()取消事件传递</li>
<li>老版本IE事件监听elem.attachEvent(‘on’+type, handler)/elem.detachEvent(‘on’+type, handler)：handler不接收event作为参数，事件信息保存在window.event中，触发事件的对象为event.srcElement，handler执行上下文this为window使用闭包中调用handler.call(elem, event)可模仿标准模型，然后返回闭包，保证了监听器的移除。event.returnValue为false时取消事件默认行为，event.cancleBubble为true时取消时间传播</li>
<li>通常利用事件冒泡机制托管事件处理程序提高程序性能。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 跨浏览器事件处理工具。只支持冒泡。不支持捕获</span><br><span class="line"> * @author  (qiu_deqing@126.com)</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> EventUtil = &#123;</span><br><span class="line">    getEvent: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> event || <span class="built_in">window</span>.event;</span><br><span class="line">    &#125;,</span><br><span class="line">    getTarget: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> event.target || event.srcElement;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 返回注册成功的监听器，IE中需要使用返回值来移除监听器</span></span><br><span class="line">    on: <span class="function"><span class="keyword">function</span> (<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (elem.addEventListener) &#123;</span><br><span class="line">            elem.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">return</span> handler;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (elem.attachEvent) &#123;</span><br><span class="line">            <span class="keyword">var</span> wrapper = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">              <span class="keyword">var</span> event = <span class="built_in">window</span>.event;</span><br><span class="line">              event.target = event.srcElement;</span><br><span class="line">              handler.call(elem, event);</span><br><span class="line">            &#125;;</span><br><span class="line">            elem.attachEvent(<span class="string">'on'</span> + type, wrapper);</span><br><span class="line">            <span class="keyword">return</span> wrapper;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    off: <span class="function"><span class="keyword">function</span> (<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (elem.removeEventListener) &#123;</span><br><span class="line">            elem.removeEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (elem.detachEvent) &#123;</span><br><span class="line">            elem.detachEvent(<span class="string">'on'</span> + type, handler);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    preventDefault: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">            event.preventDefault();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">'returnValue'</span> <span class="keyword">in</span> event) &#123;</span><br><span class="line">            event.returnValue = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    stopPropagation: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.stopPropagation) &#123;</span><br><span class="line">            event.stopPropagation();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">'cancelBubble'</span> <span class="keyword">in</span> event) &#123;</span><br><span class="line">            event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     * keypress事件跨浏览器获取输入字符</span><br><span class="line">     * 某些浏览器在一些特殊键上也触发keypress，此时返回null</span><br><span class="line">     **/</span></span><br><span class="line">     getChar: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.which == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">String</span>.fromCharCode(event.keyCode);  <span class="comment">// IE</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (event.which != <span class="number">0</span> &amp;&amp; event.charCode != <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">String</span>.fromCharCode(event.which);    <span class="comment">// the rest</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;    <span class="comment">// special key</span></span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="评价一下三种方法实现继承的优缺点,并改进">评价一下三种方法实现继承的优缺点,并改进</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Shape</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rect</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法1</span></span><br><span class="line">Rect.prototype = <span class="keyword">new</span> Shape();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法2</span></span><br><span class="line">Rect.prototype = Shape.prototype;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方法3</span></span><br><span class="line">Rect.prototype = <span class="built_in">Object</span>.create(Shape.prototype);</span><br><span class="line"></span><br><span class="line">Rect.prototype.area = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>方法1：</p>
<ol>
<li>优点：正确设置原型链实现继承</li>
<li>优点：父类实例属性得到继承，原型链查找效率提高，也能为一些属性提供合理的默认值</li>
<li>缺点：父类实例属性为引用类型时，不恰当地修改会导致所有子类被修改</li>
<li>缺点：创建父类实例作为子类原型时，可能无法确定构造函数需要的合理参数，这样提供的参数继承给子类没有实际意义，当子类需要这些参数时应该在构造函数中进行初始化和设置</li>
<li>总结：继承应该是继承方法而不是属性，为子类设置父类实例属性应该是通过在子类构造函数中调用父类构造函数进行初始化</li>
</ol>
<p>方法2：</p>
<ol>
<li>优点：正确设置原型链实现继承</li>
<li>缺点：父类构造函数原型与子类相同。修改子类原型添加方法会修改父类</li>
</ol>
<p>方法3：</p>
<ol>
<li>优点：正确设置原型链且避免方法1.2中的缺点</li>
<li>缺点：ES5方法需要注意兼容性</li>
</ol>
<p>改进：</p>
<ol>
<li>所有三种方法应该在子类构造函数中调用父类构造函数实现实例属性初始化</li>
</ol>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Rect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Shape.call(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>用新创建的对象替代子类默认原型，设置<code>Rect.prototype.constructor = Rect;</code>保证一致性</li>
<li>第三种方法的polyfill：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Object</span>.create) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.create(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line">    f.prototype = obj;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> f();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="$javascript编程部分">$javascript编程部分</h2><h4 id="请用原生js实现一个函数,给页面制定的任意一个元素添加一个透明遮罩(透明度可变,默认0-2),使这个区域点击无效,要求兼容IE8+及各主流浏览器,遮罩层效果如下图所示:">请用原生js实现一个函数,给页面制定的任意一个元素添加一个透明遮罩(透明度可变,默认0.2),使这个区域点击无效,要求兼容IE8+及各主流浏览器,遮罩层效果如下图所示:</h4><p><img src="/images/fe/element-mask.jpg" alt="遮罩效果"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span><br><span class="line"><span class="id">#target</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">200px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">300px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">40px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">background-color</span>:<span class="value"> tomato</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"></span><span class="tag">&lt;/<span class="title">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"target"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addMask</span>(<span class="params">elem, opacity</span>) </span>&#123;</span><br><span class="line">    opacity = opacity || <span class="number">0.2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> rect = elem.getBoundingClientRect();</span><br><span class="line">    <span class="keyword">var</span> style = getComputedStyle(elem, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> mask = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">    mask.style.position = <span class="string">'absolute'</span>;</span><br><span class="line">    <span class="keyword">var</span> marginLeft = <span class="built_in">parseFloat</span>(style.marginLeft);</span><br><span class="line">    mask.style.left = (elem.offsetLeft - marginLeft) + <span class="string">'px'</span>;</span><br><span class="line">    <span class="keyword">var</span> marginTop = <span class="built_in">parseFloat</span>(style.marginTop);</span><br><span class="line">    mask.style.top = (elem.offsetTop - marginTop) + <span class="string">'px'</span>;</span><br><span class="line">    mask.style.zIndex = <span class="number">9999</span>;</span><br><span class="line">    mask.style.opacity = <span class="string">''</span> + opacity;</span><br><span class="line">    mask.style.backgroundColor = <span class="string">'#000'</span>;</span><br><span class="line"></span><br><span class="line">    mask.style.width = (<span class="built_in">parseFloat</span>(style.marginLeft) +</span><br><span class="line">        <span class="built_in">parseFloat</span>(style.marginRight) + rect.width) + <span class="string">'px'</span>;</span><br><span class="line">    mask.style.height = (<span class="built_in">parseFloat</span>(style.marginTop) +</span><br><span class="line">        <span class="built_in">parseFloat</span>(style.marginBottom) + rect.height) + <span class="string">'px'</span>;</span><br><span class="line"></span><br><span class="line">    elem.parentNode.appendChild(mask);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> target = <span class="built_in">document</span>.getElementById(<span class="string">'target'</span>);</span><br><span class="line">addMask(target);</span><br><span class="line"></span><br><span class="line">target.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'click'</span>);</span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="请用代码写出(今天是星期x)其中x表示当天是星期几,如果当天是星期一,输出应该是”今天是星期一”">请用代码写出(今天是星期x)其中x表示当天是星期几,如果当天是星期一,输出应该是”今天是星期一”</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> days = [<span class="string">'日'</span>,<span class="string">'一'</span>,<span class="string">'二'</span>,<span class="string">'三'</span>,<span class="string">'四'</span>,<span class="string">'五'</span>,<span class="string">'六'</span>];</span><br><span class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'今天是星期'</span> + days[date.getDay()]);</span><br></pre></td></tr></table></figure>
<h4 id="下面这段代码想要循环延时输出结果0_1_2_3_4,请问输出结果是否正确,如果不正确,请说明为什么,并修改循环内的代码使其输出正确结果">下面这段代码想要循环延时输出结果0 1 2 3 4,请问输出结果是否正确,如果不正确,请说明为什么,并修改循环内的代码使其输出正确结果</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; ++i) &#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i + <span class="string">' '</span>);</span><br><span class="line">  &#125;, <span class="number">100</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不能输出正确结果，因为循环中setTimeout接受的参数函数通过闭包访问变量i。javascript运行环境为单线程，setTimeout注册的函数需要等待线程空闲才能执行，此时for循环已经结束，i值为5.五个定时输出都是5<br>修改方法：将setTimeout放在函数立即调用表达式中，将i值作为参数传递给包裹函数，创建新闭包</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for <span class="list">(<span class="keyword">var</span> i = <span class="number">0</span><span class="comment">; i &lt; 5; ++i) &#123;</span></span><br><span class="line">  <span class="list">(<span class="keyword">function</span> <span class="list">(<span class="keyword">i</span>)</span> &#123;</span><br><span class="line">    setTimeout<span class="list">(<span class="keyword">function</span> <span class="list">()</span> &#123;</span><br><span class="line">      console.log<span class="list">(<span class="keyword">i</span> + ' ')</span><span class="comment">;</span></span><br><span class="line">    &#125;, <span class="number">100</span>)</span><span class="comment">;</span></span><br><span class="line">  &#125;<span class="list">(<span class="keyword">i</span>)</span>)</span><span class="comment">;</span></span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="现有一个Page类,其原型对象上有许多以post开头的方法(如postMsg);另有一拦截函数chekc,只返回ture或false-请设计一个函数,该函数应批量改造原Page的postXXX方法,在保留其原有功能的同时,为每个postXXX方法增加拦截验证功能,当chekc返回true时继续执行原postXXX方法,返回false时不再执行原postXXX方法">现有一个Page类,其原型对象上有许多以post开头的方法(如postMsg);另有一拦截函数chekc,只返回ture或false.请设计一个函数,该函数应批量改造原Page的postXXX方法,在保留其原有功能的同时,为每个postXXX方法增加拦截验证功能,当chekc返回true时继续执行原postXXX方法,返回false时不再执行原postXXX方法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Page</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">Page.prototype = &#123;</span><br><span class="line">  constructor: Page,</span><br><span class="line"></span><br><span class="line">  postA: <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'a:'</span> + a);</span><br><span class="line">  &#125;,</span><br><span class="line">  postB: <span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'b:'</span> + b);</span><br><span class="line">  &#125;,</span><br><span class="line">  postC: <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'c:'</span> + c);</span><br><span class="line">  &#125;,</span><br><span class="line">  check: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.random() &gt; <span class="number">0.5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkfy</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (key.indexOf(<span class="string">'post'</span>) === <span class="number">0</span> &amp;&amp; <span class="keyword">typeof</span> obj[key] === <span class="string">'function'</span>) &#123;</span><br><span class="line">      (<span class="function"><span class="keyword">function</span> (<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> fn = obj[key];</span><br><span class="line">        obj[key] = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (obj.check()) &#123;</span><br><span class="line">            fn.apply(obj, <span class="built_in">arguments</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;(key));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; <span class="comment">// end checkfy()</span></span><br><span class="line"></span><br><span class="line">checkfy(Page.prototype);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> Page();</span><br><span class="line"></span><br><span class="line">obj.postA(<span class="string">'checkfy'</span>);</span><br><span class="line">obj.postB(<span class="string">'checkfy'</span>);</span><br><span class="line">obj.postC(<span class="string">'checkfy'</span>);</span><br></pre></td></tr></table></figure>
<h4 id="完成下面的tool-tip">完成下面的tool-tip</h4><p><img src="/images/fe/tip-box.jpg" alt="xxx"></p>
<h3 id="编写javascript深度克隆函数deepClone">编写javascript深度克隆函数deepClone</h3><pre><code><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj</span>) </span>{
    <span class="keyword">var</span> _toString = <span class="built_in">Object</span>.prototype.toString;

    <span class="comment">// null, undefined, non-object, function</span>
    <span class="keyword">if</span> (!obj || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) {
        <span class="keyword">return</span> obj;
    }

    <span class="comment">// DOM Node</span>
    <span class="keyword">if</span> (obj.nodeType &amp;&amp; <span class="string">'cloneNode'</span> <span class="keyword">in</span> obj) {
        <span class="keyword">return</span> obj.cloneNode(<span class="literal">true</span>);
    }

    <span class="comment">// Date</span>
    <span class="keyword">if</span> (_toString.call(obj) === <span class="string">'[object Date]'</span>) {
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(obj.getTime());
    }

    <span class="comment">// RegExp</span>
    <span class="keyword">if</span> (_toString.call(obj) === <span class="string">'[object RegExp]'</span>) {
        <span class="keyword">var</span> flags = [];
        <span class="keyword">if</span> (obj.global) { flags.push(<span class="string">'g'</span>); }
        <span class="keyword">if</span> (obj.multiline) { flags.push(<span class="string">'m'</span>); }
        <span class="keyword">if</span> (obj.ignoreCase) { flags.push(<span class="string">'i'</span>); }

        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">RegExp</span>(obj.source, flags.join(<span class="string">''</span>));
    }

    <span class="keyword">var</span> result = <span class="built_in">Array</span>.isArray(obj) ? [] :
        obj.constructor ? <span class="keyword">new</span> obj.constructor() : {};

    <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> obj ) {
        result[key] = deepClone(obj[key]);
    }

    <span class="keyword">return</span> result;
}

<span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>{
    <span class="keyword">this</span>.a = a;
}

<span class="keyword">var</span> a = {
    name: <span class="string">'qiu'</span>,
    birth: <span class="keyword">new</span> <span class="built_in">Date</span>(),
    pattern: <span class="regexp">/qiu/gim</span>,
    container: <span class="built_in">document</span>.body,
    hobbys: [<span class="string">'book'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="regexp">/aaa/gim</span>, <span class="number">111</span>]
};

<span class="keyword">var</span> c = <span class="keyword">new</span> A();
<span class="keyword">var</span> b = deepClone(c);
<span class="built_in">console</span>.log(c.a === b.a);
<span class="built_in">console</span>.log(c, b);
</code></pre><h4 id="补充代码,鼠标单击Button1后将Button1移动到Button2的后面">补充代码,鼠标单击Button1后将Button1移动到Button2的后面</h4><pre><code><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span>TEst<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>

<span class="tag">&lt;<span class="title">div</span>&gt;</span>
   <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">id</span> =<span class="value">"button1"</span> <span class="attribute">value</span>=<span class="value">"1"</span> /&gt;</span>
   <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"button"</span> <span class="attribute">id</span> =<span class="value">"button2"</span> <span class="attribute">value</span>=<span class="value">"2"</span> /&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>

<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="keyword">var</span> btn1 = <span class="built_in">document</span>.getElementById(<span class="string">'button1'</span>);
    <span class="keyword">var</span> btn2 = <span class="built_in">document</span>.getElementById(<span class="string">'button2'</span>);

    addListener(btn1, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>{
        btn1.parentNode.insertBefore(btn2, btn1);
    });

    <span class="function"><span class="keyword">function</span> <span class="title">addListener</span>(<span class="params">elem, type, handler</span>) </span>{
        <span class="keyword">if</span> (elem.addEventListener) {
            elem.addEventListener(type, handler, <span class="literal">false</span>);
            <span class="keyword">return</span> handler;
        } <span class="keyword">else</span> <span class="keyword">if</span> (elem.attachEvent) {
            <span class="function"><span class="keyword">function</span> <span class="title">wrapper</span>(<span class="params"></span>) </span>{
                <span class="keyword">var</span> event = <span class="built_in">window</span>.event;
                event.target = event.srcElement;
                handler.call(elem, event);
            }
            elem.attachEvent(<span class="string">'on'</span> + type, wrapper);
            <span class="keyword">return</span> wrapper;
        }
    }

</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</code></pre><h4 id="网页中实现一个计算当年还剩多少时间的倒数计时程序,要求网页上实时动态显示”××年还剩××天××时××分××秒”">网页中实现一个计算当年还剩多少时间的倒数计时程序,要求网页上实时动态显示”××年还剩××天××时××分××秒”</h4><pre><code><span class="doctype">&lt;!doctype html&gt;</span>
<span class="tag">&lt;<span class="title">html</span>&gt;</span>
<span class="tag">&lt;<span class="title">head</span>&gt;</span>
    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"utf-8"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">title</span>&gt;</span>TEst<span class="tag">&lt;/<span class="title">title</span>&gt;</span>
<span class="tag">&lt;/<span class="title">head</span>&gt;</span>
<span class="tag">&lt;<span class="title">body</span>&gt;</span>

    <span class="tag">&lt;<span class="title">span</span> <span class="attribute">id</span>=<span class="value">"target"</span>&gt;</span><span class="tag">&lt;/<span class="title">span</span>&gt;</span>


<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="comment">// 为了简化。每月默认30天</span>
    <span class="function"><span class="keyword">function</span> <span class="title">getTimeString</span>(<span class="params"></span>) </span>{
        <span class="keyword">var</span> start = <span class="keyword">new</span> <span class="built_in">Date</span>();
        <span class="keyword">var</span> end = <span class="keyword">new</span> <span class="built_in">Date</span>(start.getFullYear() + <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>);
        <span class="keyword">var</span> elapse = <span class="built_in">Math</span>.floor((end - start) / <span class="number">1000</span>);

        <span class="keyword">var</span> seconds = elapse % <span class="number">60</span> ;
        <span class="keyword">var</span> minutes = <span class="built_in">Math</span>.floor(elapse / <span class="number">60</span>) % <span class="number">60</span>;
        <span class="keyword">var</span> hours = <span class="built_in">Math</span>.floor(elapse / (<span class="number">60</span> * <span class="number">60</span>)) % <span class="number">24</span>;
        <span class="keyword">var</span> days = <span class="built_in">Math</span>.floor(elapse / (<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>)) % <span class="number">30</span>;
        <span class="keyword">var</span> months = <span class="built_in">Math</span>.floor(elapse / (<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span>)) % <span class="number">12</span>;
        <span class="keyword">var</span> years = <span class="built_in">Math</span>.floor(elapse / (<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">30</span> * <span class="number">12</span>));

        <span class="keyword">return</span> start.getFullYear() + <span class="string">'年还剩'</span> + years + <span class="string">'年'</span> + months + <span class="string">'月'</span> + days + <span class="string">'日'</span>
            + hours + <span class="string">'小时'</span> + minutes + <span class="string">'分'</span> + seconds + <span class="string">'秒'</span>;
    }

    <span class="function"><span class="keyword">function</span> <span class="title">domText</span>(<span class="params">elem, text</span>) </span>{
        <span class="keyword">if</span> (text == <span class="literal">undefined</span>) {

            <span class="keyword">if</span> (elem.textContent) {
                <span class="keyword">return</span> elem.textContent;
            } <span class="keyword">else</span> <span class="keyword">if</span> (elem.innerText) {
                <span class="keyword">return</span> elem.innerText;
            }
        } <span class="keyword">else</span> {
            <span class="keyword">if</span> (elem.textContent) {
                elem.textContent = text;
            } <span class="keyword">else</span> <span class="keyword">if</span> (elem.innerText) {
                elem.innerText = text;
            } <span class="keyword">else</span> {
                elem.innerHTML = text;
            }
        }
    }

    <span class="keyword">var</span> target = <span class="built_in">document</span>.getElementById(<span class="string">'target'</span>);

    setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>{
        domText(target, getTimeString());
    }, <span class="number">1000</span>)
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>

<span class="tag">&lt;/<span class="title">body</span>&gt;</span>
<span class="tag">&lt;/<span class="title">html</span>&gt;</span>
</code></pre><h4 id="完成一个函数,接受数组作为参数,数组元素为整数或者数组,数组元素包含整数或数组,函数返回扁平化后的数组">完成一个函数,接受数组作为参数,数组元素为整数或者数组,数组元素包含整数或数组,函数返回扁平化后的数组</h4><p>如：[1, [2, [ [3, 4], 5], 6]] =&gt; [1, 2, 3, 4, 5, 6]</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data =  [<span class="number">1</span>, [<span class="number">2</span>, [ [<span class="number">3</span>, <span class="number">4</span>], <span class="number">5</span>], <span class="number">6</span>]];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">data, result</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> i, d, len;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = data.length; i &lt; len; ++i) &#123;</span><br><span class="line">        d = data[i];</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> d === <span class="string">'number'</span>) &#123;</span><br><span class="line">            result.push(d);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            flat(d, result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = [];</span><br><span class="line">flat(data, result);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br></pre></td></tr></table></figure>
<h3 id="如何判断一个对象是否为数组">如何判断一个对象是否为数组</h3><p>如果浏览器支持Array.isArray()可以直接判断否则需进行必要判断</p>
<figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 判断一个对象是否是数组，参数不是对象或者不是数组，返回<span class="literal">false</span></span><br><span class="line"> *</span><br><span class="line"> * <span class="constant">@param</span> &#123;Object&#125; arg 需要测试是否为数组的对象</span><br><span class="line"> * <span class="constant">@return</span> &#123;Boolean&#125; 传入参数是数组返回<span class="literal">true</span>，否则返回<span class="literal">false</span></span><br><span class="line"> */</span><br><span class="line">function <span class="built_in">isArray</span>(arg) &#123;</span><br><span class="line">    <span class="keyword">if</span> (typeof arg === <span class="string">'object'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> Object.prototype.toString.<span class="built_in">call</span>(arg) === <span class="string">'[object Array]'</span><span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span><span class="comment">;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="请评价以下事件监听器代码并给出改进意见">请评价以下事件监听器代码并给出改进意见</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">  <span class="keyword">var</span> addListener = <span class="function"><span class="keyword">function</span> (<span class="params">el, type, listener, useCapture</span>) </span>&#123;</span><br><span class="line">    el.addEventListener(type, listener, useCapture);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">document</span>.all) &#123;</span><br><span class="line">  addListener = <span class="function"><span class="keyword">function</span> (<span class="params">el, type, listener</span>) </span>&#123;</span><br><span class="line">    el.attachEvent(<span class="string">'on'</span> + type, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      listener.apply(el);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>作用：浏览器功能检测实现跨浏览器DOM事件绑定</p>
<p>优点：</p>
<ol>
<li>测试代码只运行一次，根据浏览器确定绑定方法</li>
<li>通过<code>listener.apply(el)</code>解决IE下监听器this与标准不一致的地方</li>
<li>在浏览器不支持的情况下提供简单的功能，在标准浏览器中提供捕获功能</li>
</ol>
<p>缺点：</p>
<ol>
<li>document.all作为IE检测不可靠，应该使用if(el.attachEvent)</li>
<li>addListener在不同浏览器下API不一样</li>
<li><code>listener.apply</code>使this与标准一致但监听器无法移除</li>
<li>未解决IE下listener参数event。 target问题</li>
</ol>
<p>改进:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> addListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">  addListener = <span class="function"><span class="keyword">function</span> (<span class="params">el, type, listener, useCapture</span>) </span>&#123;</span><br><span class="line">    el.addEventListener(type, listener, useCapture);</span><br><span class="line">    <span class="keyword">return</span> listener;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.attachEvent) &#123;</span><br><span class="line">  addListener = <span class="function"><span class="keyword">function</span> (<span class="params">el, type, listener</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 标准化this，event，target</span></span><br><span class="line">    <span class="keyword">var</span> wrapper = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> event = <span class="built_in">window</span>.event;</span><br><span class="line">      event.target = event.srcElement;</span><br><span class="line">      listener.call(el, event);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    el.attachEvent(<span class="string">'on'</span> + type, wrapper);</span><br><span class="line">    <span class="keyword">return</span> wrapper;</span><br><span class="line">    <span class="comment">// 返回wrapper。调用者可以保存，以后remove</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="如何判断一个对象是否为函数">如何判断一个对象是否为函数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 判断对象是否为函数，如果当前运行环境对可调用对象（如正则表达式）</span><br><span class="line"> * 的typeof返回'function'，采用通用方法，否则采用优化方法</span><br><span class="line"> *</span><br><span class="line"> * @param &#123;Any&#125; arg 需要检测是否为函数的对象</span><br><span class="line"> * @return &#123;boolean&#125; 如果参数是函数，返回true，否则false</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFunction</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arg) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> (<span class="regexp">/./</span>) !== <span class="string">'function'</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">typeof</span> arg === <span class="string">'function'</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(arg) === <span class="string">'[object Function]'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="comment">// end if</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="编写一个函数接受url中query_string为参数,返回解析后的Object,query_string使用application/x-www-form-urlencoded编码">编写一个函数接受url中query string为参数,返回解析后的Object,query string使用application/x-www-form-urlencoded编码</h4><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 解析query <span class="type">string</span>转换为对象，一个key有多个值时生成数组</span><br><span class="line"> *</span><br><span class="line"> * @param &#123;<span class="type">String</span>&#125; query 需要解析的query字符串，开头可以是?，</span><br><span class="line"> * 按照application/x-www-form-urlencoded编码</span><br><span class="line"> * @<span class="keyword">return</span> &#123;<span class="type">Object</span>&#125; 参数解析后的对象</span><br><span class="line"> */</span><br><span class="line">function parseQuery(query) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="literal">result</span> = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    // 如果不是字符串返回空对象</span><br><span class="line">    <span class="keyword">if</span> (typeof query !== '<span class="type">string</span>') &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">result</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 去掉字符串开头可能带的?</span><br><span class="line">    <span class="keyword">if</span> (query.charAt(<span class="number">0</span>) === '?') &#123;</span><br><span class="line">        query = query.substring(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> pairs = query.split('&amp;');</span><br><span class="line">    <span class="keyword">var</span> pair;</span><br><span class="line">    <span class="keyword">var</span> key, value;</span><br><span class="line">    <span class="keyword">var</span> i, len;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = pairs.length; i &lt; len; ++i) &#123;</span><br><span class="line">        pair = pairs[i].split('=');</span><br><span class="line">        // application/x-www-form-urlencoded编码会将' '转换为+</span><br><span class="line">        key = decodeURIComponent(pair[<span class="number">0</span>]).replace(/\+/g, ' ');</span><br><span class="line">        value = decodeURIComponent(pair[<span class="number">1</span>]).replace(/\+/g, ' ');</span><br><span class="line"></span><br><span class="line">        // 如果是新key，直接添加</span><br><span class="line">        <span class="keyword">if</span> (!(key <span class="keyword">in</span> <span class="literal">result</span>)) &#123;</span><br><span class="line">            <span class="literal">result</span>[key] = value;</span><br><span class="line">        &#125;</span><br><span class="line">        // 如果key已经出现一次以上，直接向数组添加value</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (isArray(<span class="literal">result</span>[key])) &#123;</span><br><span class="line">            <span class="literal">result</span>[key].push(value);</span><br><span class="line">        &#125;</span><br><span class="line">        // key第二次出现，将结果改为数组</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> arr = [<span class="literal">result</span>[key]];</span><br><span class="line">            arr.push(value);</span><br><span class="line">            <span class="literal">result</span>[key] = arr;</span><br><span class="line">        &#125; // <span class="keyword">end</span> <span class="keyword">if</span>-<span class="keyword">else</span></span><br><span class="line">    &#125; // <span class="keyword">end</span> <span class="keyword">for</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function isArray(arg) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arg &amp;&amp; typeof arg === '<span class="keyword">object</span>') &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Object</span>.prototype.toString.call(arg) === '[<span class="keyword">object</span> <span class="type">Array</span>]';</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line">console.log(parseQuery('sourceid=chrome-instant&amp;ion=<span class="number">1</span>&amp;espv=<span class="number">2</span>&amp;ie=<span class="type">UTF</span>-<span class="number">8</span>'));</span><br><span class="line"> */</span><br></pre></td></tr></table></figure>
<h4 id="解析一个完整的url,返回Object包含域与window-location相同">解析一个完整的url,返回Object包含域与window.location相同</h4><figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 解析一个url并生成window.location对象中包含的域</span><br><span class="line"> * location:</span><br><span class="line"> * &#123;</span><br><span class="line"> *      href: '包含完整的url',</span><br><span class="line"> *      origin: '包含协议到pathname之前的内容',</span><br><span class="line"> *      protocol: 'url使用的协议，包含末尾的:',</span><br><span class="line"> *      username: '用户名', // 暂时不支持</span><br><span class="line"> *      password: '密码',  // 暂时不支持</span><br><span class="line"> *      host: '完整主机名，包含:和端口',</span><br><span class="line"> *      hostname: '主机名，不包含端口'</span><br><span class="line"> *      port: '端口号',</span><br><span class="line"> *      pathname: '服务器上访问资源的路径/开头',</span><br><span class="line"> *      search: 'query <span class="type">string</span>，?开头',</span><br><span class="line"> *      hash: '<span class="comment">#开头的fragment identifier'</span></span><br><span class="line"> * &#125;</span><br><span class="line"> *</span><br><span class="line"> * @param &#123;<span class="type">string</span>&#125; url 需要解析的url</span><br><span class="line"> * @<span class="keyword">return</span> &#123;<span class="type">Object</span>&#125; 包含url信息的对象</span><br><span class="line"> */</span><br><span class="line">function parseUrl(url) &#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="literal">result</span> = &#123;&#125;;</span><br><span class="line">    <span class="keyword">var</span> keys = ['href', 'origin', 'protocol', 'host',</span><br><span class="line">                'hostname', 'port', 'pathname', 'search', 'hash'];</span><br><span class="line">    <span class="keyword">var</span> i, len;</span><br><span class="line">    <span class="keyword">var</span> regexp = /(([^:]+:)\/\/(([^:\/\?<span class="comment">#]+)(:\d+)?))(\/[^?#]*)?(\?[^#]*)?(#.*)?/;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> match = regexp.exec(url);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (match) &#123;</span><br><span class="line">        <span class="keyword">for</span> (i = keys.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="literal">result</span>[keys[i]] = match[i] ? match[i] : '';</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">result</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="完成函数getViewportSize返回指定窗口的视口尺寸">完成函数getViewportSize返回指定窗口的视口尺寸</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 查询指定窗口的视口尺寸，如果不指定窗口，查询当前窗口尺寸</span><br><span class="line">**/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getViewportSize</span>(<span class="params">w</span>) </span>&#123;</span><br><span class="line">    w = w || <span class="built_in">window</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IE9及标准浏览器中可使用此标准方法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">'innerHeight'</span> <span class="keyword">in</span> w) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            width: w.innerWidth,</span><br><span class="line">            height: w.innerHeight</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> d = w.document;</span><br><span class="line">    <span class="comment">// IE 8及以下浏览器在标准模式下</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.compatMode === <span class="string">'CSS1Compat'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            width: d.documentElement.clientWidth,</span><br><span class="line">            height: d.documentElement.clientHeight</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// IE8及以下浏览器在怪癖模式下</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        width: d.body.clientWidth,</span><br><span class="line">        height: d.body.clientHeight</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="完成函数getScrollOffset返回窗口滚动条偏移量">完成函数getScrollOffset返回窗口滚动条偏移量</h4><pre><code><span class="comment">/**
 * 获取指定window中滚动条的偏移量，如未指定则获取当前window
 * 滚动条偏移量
 *
 * <span class="doctag">@param</span> {window} w 需要获取滚动条偏移量的窗口
 * <span class="doctag">@return</span> {Object} obj.x为水平滚动条偏移量,obj.y为竖直滚动条偏移量
 */</span>
<span class="function"><span class="keyword">function</span> <span class="title">getScrollOffset</span><span class="params">(w)</span> </span>{
    w =  w || window;
    <span class="comment">// 如果是标准浏览器</span>
    <span class="keyword">if</span> (w.pageXOffset != <span class="keyword">null</span>) {
        <span class="keyword">return</span> {
            x: w.pageXOffset,
            y: w.pageYOffset
        };
    }

    <span class="comment">// 老版本IE，根据兼容性不同访问不同元素</span>
    <span class="keyword">var</span> d = w.document;
    <span class="keyword">if</span> (d.compatMode === <span class="string">'CSS1Compat'</span>) {
        <span class="keyword">return</span> {
            x: d.documentElement.scrollLeft,
            y: d.documentElement.scrollTop
        }
    }

    <span class="keyword">return</span> {
        x: d.body.scrollLeft,
        y: d.body.scrollTop
    };
}
</code></pre><h4 id="现有一个字符串richText,是一段富文本,需要显示在页面上-有个要求,需要给其中只包含一个img元素的p标签增加一个叫pic的class-请编写代码实现-可以使用jQuery或KISSY-">现有一个字符串richText,是一段富文本,需要显示在页面上.有个要求,需要给其中只包含一个img元素的p标签增加一个叫pic的class.请编写代码实现.可以使用jQuery或KISSY.</h4><pre><code><span class="function"><span class="keyword">function</span> <span class="title">richText</span>(<span class="params">text</span>) </span>{
    <span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);
    div.innerHTML = text;
    <span class="keyword">var</span> p = div.getElementsByTagName(<span class="string">'p'</span>);
    <span class="keyword">var</span> i, len;

    <span class="keyword">for</span> (i = <span class="number">0</span>, len = p.length; i &lt; len; ++i) {
        <span class="keyword">if</span> (p[i].getElementsByTagName(<span class="string">'img'</span>).length === <span class="number">1</span>) {
            p[i].classList.add(<span class="string">'pic'</span>);
        }
    }

    <span class="keyword">return</span> div.innerHTML;
}
</code></pre><h4 id="请实现一个Event类,继承自此类的对象都会拥有两个方法on,off,once和trigger">请实现一个Event类,继承自此类的对象都会拥有两个方法on,off,once和trigger</h4><pre><code>function <span class="type">Event</span>() {
    <span class="keyword">if</span> (!(<span class="keyword">this</span> instanceof <span class="type">Event</span>)) {
        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">Event</span>();
    }
    <span class="keyword">this</span>._callbacks = {};
}
<span class="type">Event</span>.prototype.on = function (<span class="class"><span class="keyword">type</span>, <span class="title">handler</span>) {</span>
    this_callbacks = <span class="keyword">this</span>._callbacks || {};
    <span class="keyword">this</span>._callbacks[<span class="class"><span class="keyword">type</span>] =</span> <span class="keyword">this</span>.callbacks[<span class="class"><span class="keyword">type</span>] <span class="title">||</span> [</span>];
    <span class="keyword">this</span>._callbacks[<span class="class"><span class="keyword">type</span>].<span class="title">push</span>(</span>handler);

    <span class="keyword">return</span> <span class="keyword">this</span>;
};

<span class="type">Event</span>.prototype.off = function (<span class="class"><span class="keyword">type</span>, <span class="title">handler</span>) {</span>
    <span class="keyword">var</span> list = <span class="keyword">this</span>._callbacks[<span class="class"><span class="keyword">type</span>];</span>

    <span class="keyword">if</span> (list) {
        <span class="keyword">for</span> (<span class="keyword">var</span> i = list.length; i &gt;= <span class="number">0</span>; --i) {
            <span class="keyword">if</span> (list[i] === handler) {
                list.splice(i, <span class="number">1</span>);
            }
        }
    }

    <span class="keyword">return</span> <span class="keyword">this</span>;
};

<span class="type">Event</span>.prototype.trigger = function (<span class="class"><span class="keyword">type</span>, <span class="title">data</span>) {</span>
    <span class="keyword">var</span> list = <span class="keyword">this</span>._callbacks[<span class="class"><span class="keyword">type</span>];</span>

    <span class="keyword">if</span> (list) {
        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = list.length; i &lt; len; ++i) {
            list[i].call(<span class="keyword">this</span>, data);
        }
    }
};

<span class="type">Event</span>.prototype.once = function (<span class="class"><span class="keyword">type</span>, <span class="title">handler</span>) {</span>
    <span class="keyword">var</span> self = <span class="keyword">this</span>;

    function wrapper() {
        handler.apply(self, arguments);
        self.off(<span class="class"><span class="keyword">type</span>, <span class="title">wrapper</span>);</span>
    }
    <span class="keyword">this</span>.on(<span class="class"><span class="keyword">type</span>, <span class="title">wrapper</span>);</span>
    <span class="keyword">return</span> <span class="keyword">this</span>;
};
</code></pre><h4 id="编写一个函数将列表子元素顺序反转">编写一个函数将列表子元素顺序反转</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">id</span>=<span class="value">"target"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>1<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>2<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>3<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span>4<span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span><br><span class="line">    <span class="keyword">var</span> target = <span class="built_in">document</span>.getElementById(<span class="string">'target'</span>);</span><br><span class="line">    <span class="keyword">var</span> i;</span><br><span class="line">    <span class="keyword">var</span> frag = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = target.children.length - <span class="number">1</span>; i &amp;gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">        frag.appendChild(target.children[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    target.appendChild(frag);</span><br><span class="line"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="以下函数的作用是?空白区域应该填写什么">以下函数的作用是?空白区域应该填写什么</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// define</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window</span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.str = str;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fn.prototype.format = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> arg = __1__;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.str.replace(__2__, <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> arg[b] || <span class="string">''</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.fn = fn;</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// use</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> t = <span class="keyword">new</span> fn(<span class="string">'&lt;p&gt;&lt;a href="&#123;0&#125;"&gt;&#123;1&#125;&lt;/a&gt;&lt;span&gt;&#123;2&#125;&lt;/span&gt;&lt;/p&gt;'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(t.format(<span class="string">'http:\/\/www.alibaba.com'</span>, <span class="string">'Alibaba'</span>, <span class="string">'Welcome'</span>));</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>define部分定义一个简单的模板类，使用{}作为转义标记，中间的数字表示替换目标，format实参用来替换模板内标记<br>横线处填：</p>
<ol>
<li><code>Array.prototype.slice.call(arguments, 0)</code></li>
<li><code>/\{\s*(\d+)\s*\}/g</code></li>
</ol>
<h4 id="编写一个函数实现form的序列化(即将一个表单中的键值序列化为可提交的字符串)">编写一个函数实现form的序列化(即将一个表单中的键值序列化为可提交的字符串)</h4><pre><code><span class="tag">&lt;<span class="title">form</span> <span class="attribute">id</span>=<span class="value">"target"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"age"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"aaa"</span>&gt;</span>aaa<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"bbb"</span> <span class="attribute">selected</span>&gt;</span>bbb<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">select</span>&gt;</span>
    <span class="tag">&lt;<span class="title">select</span> <span class="attribute">name</span>=<span class="value">"friends"</span> <span class="attribute">multiple</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"qiu"</span> <span class="attribute">selected</span>&gt;</span>qiu<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"de"</span>&gt;</span>de<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
        <span class="tag">&lt;<span class="title">option</span> <span class="attribute">value</span>=<span class="value">"qing"</span> <span class="attribute">selected</span>&gt;</span>qing<span class="tag">&lt;/<span class="title">option</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">select</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">name</span>=<span class="value">"name"</span> <span class="attribute">value</span>=<span class="value">"qiudeqing"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"password"</span> <span class="attribute">name</span>=<span class="value">"password"</span> <span class="attribute">value</span>=<span class="value">"11111"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"hidden"</span> <span class="attribute">name</span>=<span class="value">"salery"</span> <span class="attribute">value</span>=<span class="value">"3333"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">textarea</span> <span class="attribute">name</span>=<span class="value">"description"</span>&gt;</span>description<span class="tag">&lt;/<span class="title">textarea</span>&gt;</span>
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">name</span>=<span class="value">"hobby"</span> <span class="attribute">checked</span> <span class="attribute">value</span>=<span class="value">"football"</span>&gt;</span>Football
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"checkbox"</span> <span class="attribute">name</span>=<span class="value">"hobby"</span> <span class="attribute">value</span>=<span class="value">"basketball"</span>&gt;</span>Basketball
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span>=<span class="value">"sex"</span> <span class="attribute">checked</span> <span class="attribute">value</span>=<span class="value">"Female"</span>&gt;</span>Female
    <span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">"radio"</span> <span class="attribute">name</span>=<span class="value">"sex"</span> <span class="attribute">value</span>=<span class="value">"Male"</span>&gt;</span>Male
<span class="tag">&lt;/<span class="title">form</span>&gt;</span>


<span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript">

<span class="comment">/**
 * 将一个表单元素序列化为可提交的字符串
 *
 * @param {FormElement} form 需要序列化的表单元素
 * @return {string} 表单序列化后的字符串
 */</span>
<span class="function"><span class="keyword">function</span> <span class="title">serializeForm</span>(<span class="params">form</span>) </span>{
  <span class="keyword">if</span> (!form || form.nodeName.toUpperCase() !== <span class="string">'FORM'</span>) {
    <span class="keyword">return</span>;
  }

  <span class="keyword">var</span> result = [];

  <span class="keyword">var</span> i, len;
  <span class="keyword">var</span> field, fieldName, fieldType;

  <span class="keyword">for</span> (i = <span class="number">0</span>, len = form.length; i &lt; len; ++i) {
    field = form.elements[i];
    fieldName = field.name;
    fieldType = field.type;

    <span class="keyword">if</span> (field.disabled || !fieldName) {
      <span class="keyword">continue</span>;
    } <span class="comment">// enf if</span>

    <span class="keyword">switch</span> (fieldType) {
      <span class="keyword">case</span> <span class="string">'text'</span>:
      <span class="keyword">case</span> <span class="string">'password'</span>:
      <span class="keyword">case</span> <span class="string">'hidden'</span>:
      <span class="keyword">case</span> <span class="string">'textarea'</span>:
        result.push(<span class="built_in">encodeURIComponent</span>(fieldName) + <span class="string">'='</span> +
            <span class="built_in">encodeURIComponent</span>(field.value));
        <span class="keyword">break</span>;

      <span class="keyword">case</span> <span class="string">'radio'</span>:
      <span class="keyword">case</span> <span class="string">'checkbox'</span>:
        <span class="keyword">if</span> (field.checked) {
          result.push(<span class="built_in">encodeURIComponent</span>(fieldName) + <span class="string">'='</span> +
            <span class="built_in">encodeURIComponent</span>(field.value));
        }
        <span class="keyword">break</span>;

      <span class="keyword">case</span> <span class="string">'select-one'</span>:
      <span class="keyword">case</span> <span class="string">'select-multiple'</span>:
        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, jLen = field.options.length; j &lt; jLen; ++j) {
          <span class="keyword">if</span> (field.options[j].selected) {
            result.push(<span class="built_in">encodeURIComponent</span>(fieldName) + <span class="string">'='</span> +
              <span class="built_in">encodeURIComponent</span>(field.options[j].value || field.options[j].text));
          }
        } <span class="comment">// end for</span>
        <span class="keyword">break</span>;

      <span class="keyword">case</span> <span class="string">'file'</span>:
      <span class="keyword">case</span> <span class="string">'submit'</span>:
        <span class="keyword">break</span>; <span class="comment">// 是否处理？</span>

      <span class="keyword">default</span>:
        <span class="keyword">break</span>;
    } <span class="comment">// end switch</span>
  } <span class="comment">// end for</span>

    <span class="keyword">return</span> result.join(<span class="string">'&amp;'</span>);
}

<span class="keyword">var</span> form = <span class="built_in">document</span>.getElementById(<span class="string">'target'</span>);
<span class="built_in">console</span>.log(serializeForm(form));
</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</code></pre><h4 id="使用原生javascript给下面列表中的li节点绑定点击事件,点击时创建一个Object对象,兼容IE和标准浏览器">使用原生javascript给下面列表中的li节点绑定点击事件,点击时创建一个Object对象,兼容IE和标准浏览器</h4><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">id</span>=<span class="value">"nav"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://11111"</span>&gt;</span>111<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://2222"</span>&gt;</span>222<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://333"</span>&gt;</span>333<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://444"</span>&gt;</span>444<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line">Object:</span><br><span class="line"></span><span class="expression">&#123;</span><br><span class="line">    <span class="string">"index"</span>: 1,</span><br><span class="line">    <span class="string">"name"</span>: <span class="string">"111"</span>,</span><br><span class="line">    <span class="string">"link"</span>: <span class="string">"http://1111"</span></span><br><span class="line">&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure>
<p>script:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> EventUtil = &#123;</span><br><span class="line">    getEvent: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> event || <span class="built_in">window</span>.event;</span><br><span class="line">    &#125;,</span><br><span class="line">    getTarget: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> event.target || event.srcElement;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 返回注册成功的监听器，IE中需要使用返回值来移除监听器</span></span><br><span class="line">    on: <span class="function"><span class="keyword">function</span> (<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (elem.addEventListener) &#123;</span><br><span class="line">            elem.addEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">return</span> handler;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (elem.attachEvent) &#123;</span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">wrapper</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> handler.call(elem, event);</span><br><span class="line">            &#125;;</span><br><span class="line">            elem.attachEvent(<span class="string">'on'</span> + type, wrapper);</span><br><span class="line">            <span class="keyword">return</span> wrapper;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    off: <span class="function"><span class="keyword">function</span> (<span class="params">elem, type, handler</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (elem.removeEventListener) &#123;</span><br><span class="line">            elem.removeEventListener(type, handler, <span class="literal">false</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (elem.detachEvent) &#123;</span><br><span class="line">            elem.detachEvent(<span class="string">'on'</span> + type, handler);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    preventDefault: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.preventDefault) &#123;</span><br><span class="line">            event.preventDefault();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">'returnValue'</span> <span class="keyword">in</span> event) &#123;</span><br><span class="line">            event.returnValue = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    stopPropagation: <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (event.stopPropagation) &#123;</span><br><span class="line">            event.stopPropagation();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">'cancelBubble'</span> <span class="keyword">in</span> event) &#123;</span><br><span class="line">            event.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> DOMUtil = &#123;</span><br><span class="line">    text: <span class="function"><span class="keyword">function</span> (<span class="params">elem</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'textContent'</span> <span class="keyword">in</span> elem) &#123;</span><br><span class="line">            <span class="keyword">return</span> elem.textContent;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">'innerText'</span> <span class="keyword">in</span> elem) &#123;</span><br><span class="line">            <span class="keyword">return</span> elem.innerText;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    prop: <span class="function"><span class="keyword">function</span> (<span class="params">elem, propName</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> elem.getAttribute(propName);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> nav = <span class="built_in">document</span>.getElementById(<span class="string">'nav'</span>);</span><br><span class="line"></span><br><span class="line">EventUtil.on(nav, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> event = EventUtil.getEvent(event);</span><br><span class="line">    <span class="keyword">var</span> target = EventUtil.getTarget(event);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> children = <span class="keyword">this</span>.children;</span><br><span class="line">    <span class="keyword">var</span> i, len;</span><br><span class="line">    <span class="keyword">var</span> anchor;</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>, len = children.length; i &lt; len; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (children[i] === target) &#123;</span><br><span class="line">            obj.index = i + <span class="number">1</span>;</span><br><span class="line">            anchor = target.getElementsByTagName(<span class="string">'a'</span>)[<span class="number">0</span>];</span><br><span class="line">            obj.name = DOMUtil.text(anchor);</span><br><span class="line">            obj.link = DOMUtil.prop(anchor, <span class="string">'href'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    alert(<span class="string">'index: '</span> + obj.index + <span class="string">' name: '</span> + obj.name +</span><br><span class="line">        <span class="string">' link: '</span> + obj.link);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="有一个大数组,var_a_=_[‘1’,_‘2’,_‘3’,_…];a的长度是100,内容填充随机整数的字符串-请先构造此数组a,然后设计一个算法将其内容去重">有一个大数组,var a = [‘1’, ‘2’, ‘3’, …];a的长度是100,内容填充随机整数的字符串.请先构造此数组a,然后设计一个算法将其内容去重</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">* 数组去重</span><br><span class="line">**/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">normalize</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (arr &amp;&amp; <span class="built_in">Array</span>.isArray(arr)) &#123;</span><br><span class="line">        <span class="keyword">var</span> i, len, map = &#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (i = arr.length; i &gt;= <span class="number">0</span>; --i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (arr[i] <span class="keyword">in</span> map) &#123;</span><br><span class="line">                arr.splice(i, <span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                map[arr[i]] = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line">* 用100个随机整数对应的字符串填充数组。</span><br><span class="line">**/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fillArray</span>(<span class="params">arr, start, end</span>) </span>&#123;</span><br><span class="line">    start = start == <span class="literal">undefined</span> ? <span class="number">1</span> : start;</span><br><span class="line">    end = end == <span class="literal">undefined</span> ?  <span class="number">100</span> : end;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (end &lt;= start) &#123;</span><br><span class="line">        end = start + <span class="number">100</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> width = end - start;</span><br><span class="line">    <span class="keyword">var</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">100</span>; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        arr.push(<span class="string">''</span> + (<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * width) + start));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> input = [];</span><br><span class="line">fillArray(input, <span class="number">1</span>, <span class="number">100</span>);</span><br><span class="line">input.sort(<span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(input);</span><br><span class="line"></span><br><span class="line">normalize(input);</span><br><span class="line"><span class="built_in">console</span>.log(input);</span><br></pre></td></tr></table></figure>
<p>转载请注明出处: <a href="https://github.com/qiu-deqing/FE-interview" target="_blank" rel="external">https://github.com/qiu-deqing/FE-interview</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/css/" class="post__tag__link">css</a></li><li class="post__tag__item"><a href="/tags/html/" class="post__tag__link">html</a></li><li class="post__tag__item"><a href="/tags/javascript/" class="post__tag__link">javascript</a></li></ul><a class="post__foot-link u-fr"></a></footer></article><article class="post"><header class="post__head"><time datetime="2015-10-17T08:01:54.000Z" class="post__time">October 17, 2015</time><h1 class="post__title"><a href="/2015/10/17/domcontentloaded/">Javascript中的domReady引入机制</a></h1><hr/></header><div class="post__main echo"><h2 id="一、扯淡部分">一、扯淡部分</h2><p>回想当年，在摆脱写页面时js全靠从各种DEMO中copy出来然后东拼西凑的幽暗岁月之后，毅然决然地打算放弃这种处处“拿来主义”的不正之风，然后开启通往高大上的“前端攻城狮”的飞升之旅。想想都有些小激动呢~然而人生不如意者十之八九，刚踏上征程就经常会被各种Error虐到体无完肤，有时候甚至会被在现在看来很低级的bug折磨得生不如死。但没有一种成长是不需要付出代价的，也就是那段刚跳入泥潭的日子开启了让自己成为一名真正的JSer的大门，也使自己在奔向高大上的路上让“见招拆招、兵来将挡”成为常态，以至于后来都慢慢觉得，做一个东西不遇上几个bug心里就没有稳妥扎实的安全感。再后来也就学着不断去安慰自己：踩到脚底下的bug越多，离翻过那座墙也就不远了~</p>
<a id="more"></a>
<p>回望一路走来的林林种种，有一个bug大概是每个JSer在初入大门时都遇到过的。那就是用js获取页面元素的时候经常会报出一个<code>TypeError:Cannot read property ‘XXX’of null.</code>大意就是根本就没找到你要找的元素，更别说你要对它进行操作了。明明页面上有这个元素，但在js里偏偏获取不到，这让很多刚接触js不久的童鞋都伤透了脑筋，于是疯狂百度谷歌，最后才发现造成这个低级bug的始作俑者竟然是<code>window.onload</code>，也就是文档未就绪，DOM树还没有建完就开始对节点进行操作从而导致的错误。</p>
<p>扯了那么多，终于扯到跟本文主题相干的东西了：<code>domReady</code>，也就是所谓的“文档就绪”。我们对DOM节点的任何操作在DOM树创建之后就可以进行。在理解这个概念之前，我们先来看看浏览器在载入一个文档时是怎么对HTML进行解析的。</p>
<h2 id="二、浏览器渲染引擎的HTML解析流程">二、浏览器渲染引擎的HTML解析流程</h2><p>何谓“渲染”，其实就是浏览器把请求到的HTML内容显示出来的过程。渲染引擎首先通过网络获得所请求文档的内容，通常以8K分块的方式完成。下面是渲染引擎在取得内容之后的基本流程：</p>
<blockquote>
<p>1，解析html以构建dom树（构建DOM节点）：渲染引擎开始解析html，并将标签转化为内容树中的dom节点。</p>
<p>2，构建render树（解析样式信息）：解析外部CSS文件及style标签中的样式信息。Render树由一些包含有各种属性的矩形组成，它们将被按照正确的顺序显示到屏幕上。</p>
<p>3，布局render树（布局DOM节点）：执行布局过程，它将确定每个节点在屏幕上的确切坐标。</p>
<p>4，绘制render树（绘制DOM节点）：Render树构建好了之后，将会再下一步就是绘制，即遍历render树，并使用UI后端层绘制每个节点。</p>
</blockquote>
<p>以上就是HTML渲染的基本流程（详情请移步至“<a href="http://kb.cnblogs.com/page/129756/" target="_blank" rel="external">浏览器内部工作原理</a>”），但这并不包含解析过程中浏览器加载外部资源如图片、脚本、iframe等的过程。说白了，上面的四步仅仅是HTML结构的渲染流程，而外部资源的加载在HTML结构的渲染流程中贯穿始终，即便绘制DOM节点已经完成，外部资源依然可能正在加载中或尚未加载。</p>
<h2 id="三、window-onload">三、window.onload</h2><p>了解了浏览器渲染引擎的HTML解析流程，我们就回到domReady。前文提到了，那个蛋疼的TypeError是由于在DOM树构建完成之前对节点进行了操作，而通常的解决的办法就是让js在window.onload的回调里执行，也就是说，在文档所有的解析渲染、资源加载完成之前，不让js脚本执行，这样一来就妥妥地避免了因js操作先于DOM树创建而带来的bug：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Window.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="comment">//doSomething</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样的解决办法应该是初学原生js时很多人最常用的解决办法，看起来也的确没什么问题。如果文档外部资源不多的时候也没什么问题，但，我们来做一个假设。假设一个页面上有100张远程图片，我需要让js做到在点击每张图片时alert出图片的src属性，又该怎么做？</p>
<p>是不是已经发现点小问题了？按照第二部分内容对浏览器解析渲染HTML流程的介绍，DOM树很快就构建完毕了，而100张图片还在缓慢地加载。而要想执行alert出图片src属性的js，则需要等到100张图片全部加载完成后才能执行。而在这期间，页面元素不会响应你的任何操作，就好像“死”了一样。如果是在实际项目中，用户很可能不会等到你页面所有东东加载完以后才去操作，在面对一个不会对自己的操作做任何响应的页面，唯一比较解气的方式就是——果断关掉~然后……就没有了然后。</p>
<p>所以在实际应用中，我们经常会遇到这样的场景，让页面加载后去做一些事情：绑定事件、DOM操作某些结点等。使用<code>window.onload</code>对于很多实际的应用而言有点太“迟”了，比较影响用户体验。那有没有更好的方法解决这个问题？比如提前到只要DOM树创建完成之后就可以进行如上操作呢？答案当然是有的：<code>DOMContentLoaded</code>事件。</p>
<h2 id="四、DOMContentLoaded">四、DOMContentLoaded</h2><p>说这个之前必须要提一下jQuery中的<code>domReady</code>机制。很多时候在使用jq也会出现最前面出现的那个<code>TypeError</code>，解决办法就是把js放到jQuery的ready回调里：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;...&#125;);</span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;...&#125;);</span><br></pre></td></tr></table></figure>
<p>这样一来，错误妥妥地没了。然后对比因果关系，大概得出一个结论：jQuery的ready回调应该跟<code>window.onload</code>的效果原理是一样的。恩，应该是这样。那我们就先来看一看jQuery（1.11.1）的<code>ready</code>回调是如何实现的：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">jQuery.fn.ready = <span class="function"><span class="keyword">function</span>(<span class="params"> fn </span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Add the callback</span></span><br><span class="line">    jQuery.ready.promise().done( fn );</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;;</span><br><span class="line">jQuery.ready.promise = <span class="function"><span class="keyword">function</span>(<span class="params"> obj </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ( !readyList ) &#123;</span><br><span class="line">        readyList = jQuery.Deferred();</span><br><span class="line">        <span class="keyword">if</span> ( <span class="built_in">document</span>.readyState === <span class="string">"complete"</span> ) &#123;</span><br><span class="line">            setTimeout( jQuery.ready );</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> ( <span class="built_in">document</span>.addEventListener ) &#123;</span><br><span class="line">            <span class="built_in">document</span>.addEventListener( <span class="string">"DOMContentLoaded"</span>, completed, <span class="literal">false</span> );</span><br><span class="line">            <span class="built_in">window</span>.addEventListener( <span class="string">"load"</span>, completed, <span class="literal">false</span> );</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">document</span>.attachEvent( <span class="string">"onreadystatechange"</span>, completed );</span><br><span class="line">            <span class="built_in">window</span>.attachEvent( <span class="string">"onload"</span>, completed );</span><br><span class="line">            <span class="keyword">var</span> top = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                top = <span class="built_in">window</span>.frameElement == <span class="literal">null</span> &amp;&amp; <span class="built_in">document</span>.documentElement;</span><br><span class="line">            &#125; <span class="keyword">catch</span>(e) &#123;&#125;</span><br><span class="line">            <span class="keyword">if</span> ( top &amp;&amp; top.doScroll ) &#123;</span><br><span class="line">                (<span class="function"><span class="keyword">function</span> <span class="title">doScrollCheck</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> ( !jQuery.isReady ) &#123;</span><br><span class="line">                        <span class="keyword">try</span> &#123;</span><br><span class="line">                            <span class="comment">// Use the trick by Diego Perini</span></span><br><span class="line">                            top.doScroll(<span class="string">"left"</span>);</span><br><span class="line">                        &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">                            <span class="keyword">return</span> setTimeout( doScrollCheck, <span class="number">50</span> );</span><br><span class="line">                        &#125;</span><br><span class="line">                        detach();</span><br><span class="line">                        jQuery.ready();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> readyList.promise( obj );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>看起来比想象中的<code>window.onload</code>要复杂呵。Jq的源码中出现了<code>DOMContentLoaded</code>、<code>readyState</code>、<code>onreadystatechange</code>，这些跟<code>domReady</code>有什么关系？</p>
<p>我们还是先从<code>DOMContentLoaded</code>说起吧。就如前面所述，很多时候我们会把js逻辑写在<code>window.onload</code>回调中，以防DOM树还没有建完就开始对节点进行操作从而导致错误，而对于很多实际应用来说，越早介入对DOM的干涉就越好，比如进行特征侦测、事件绑定、DOM操作神马的。domReady还可以满足用户提前绑定事件的需求，因为有些情况下页面的图片等外部资源过多，<code>window.onload</code>迟迟不能触发，这时若还没有绑定事件，用户点任何的按钮都没反应（链接除外）会直接影响体验。</p>
<p>为了解决<code>window.onload</code>的短板，FF中便增加了一个<code>DOMContentLoaded</code>方法，与<code>onload</code>相比，<code>DOMContentLoaded</code>方法触发的时间更早，它是在页面的DOM树创建完成后（也就是HTML解析第一步完成）即触发，而无需等待其他资源的加载。Webkit引擎从版本525（Webkit nightly 1/2008:525+）开始也引入了该事件，Opera中也包含该方法。到目前为止NB的IE仍然没有要添加的意思。虽然IE下没有，但解决办法总是有的。于是对于那些忙前忙后的兼容小达人和死不悔改的顽固派，也就有了两套策略：</p>
<ul>
<li><p>1）支持DOMContentLoaded事件的，就使用DOMContentLoaded事件；</p>
</li>
<li><p>2）不支持的，就用来自Diego Perini发现的著名Hack兼容。兼容原理大概就是，通过IE中的<code>document.documentElement.doScroll(‘left’)</code>来判断DOM树是否创建完毕。</p>
</li>
</ul>
<p>Blabla了这么多，来看个IE模拟<code>DOMContentLoaded</code>例子吧。这个例子就来自上面发现IE下<code>doScroll Hackd</code>的作者，细看也就是简化版的<code>jQuery.ready</code>回调的IE处理逻辑。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">IEContentLoaded</span> (<span class="params">w, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = w.document, done = <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// 只执行一次用户的回调函数init()</span></span><br><span class="line">    init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!done) &#123;</span><br><span class="line">            done = <span class="literal">true</span>;</span><br><span class="line">            fn();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// DOM树未创建完之前调用doScroll会抛出错误</span></span><br><span class="line">            d.documentElement.doScroll(<span class="string">'left'</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            <span class="comment">//延迟再试一次~</span></span><br><span class="line">            setTimeout(<span class="built_in">arguments</span>.callee, <span class="number">50</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 没有错误就表示DOM树创建完毕，然后立马执行用户回调</span></span><br><span class="line">        init();</span><br><span class="line">    &#125;)();</span><br><span class="line">    <span class="comment">//监听document的加载状态</span></span><br><span class="line">    d.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 如果用户是在domReady之后绑定的函数，就立马执行</span></span><br><span class="line">        <span class="keyword">if</span> (d.readyState == <span class="string">'complete'</span>) &#123;</span><br><span class="line">            d.onreadystatechange = <span class="literal">null</span>;</span><br><span class="line">            init();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>而对于高大上的chrome、ff等高级浏览器来说，对<code>DOMContentLoaded</code>事件的处理就相对来说小case了，按照标准的事件绑定方式就可以处理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ( <span class="built_in">document</span>.addEventListener ) &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener( <span class="string">"DOMContentLoaded"</span>, completed, <span class="literal">false</span> );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="五、实例">五、实例</h2><p>看到这，想必大家已经对<code>DOMContentLoaded</code>已经有了新的认识，<code>onload</code>保险丝也该适时换成智能电门啦~接下来就来个鲜活的例子，来让大家更清晰的做下对比。</p>
<p>首先，页面上有一组图片：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"img/01.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"img/02.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"img/03.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"img/04.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">img</span> <span class="attribute">src</span>=<span class="value">"img/05.jpg"</span> /&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>页面的js处理逻辑：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="built_in">document</span>;</span><br><span class="line">    <span class="keyword">var</span> msgBox = d.getElementById(<span class="string">"showMsg"</span>);</span><br><span class="line">    <span class="keyword">var</span> imgs = d.getElementsByTagName(<span class="string">"img"</span>);</span><br><span class="line">    <span class="keyword">var</span> time1 = <span class="literal">null</span>,time2 = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">if</span>(d.addEventListener)&#123;</span><br><span class="line">        d.addEventListener(<span class="string">"DOMContentLoaded"</span>,domReady,<span class="literal">false</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        IEContentLoaded(domReady);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">domReady</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        msgBox.innerHTML += <span class="string">"dom已加载！&lt;br&gt;"</span>;</span><br><span class="line">        time1 = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">        msgBox.innerHTML += <span class="string">"时间戳："</span> + time1 + <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//兼容IE的domReady</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">IEContentLoaded</span>(<span class="params">fn</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> done = <span class="literal">false</span>,</span><br><span class="line">        init = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!done)&#123;</span><br><span class="line">                done = <span class="literal">true</span>;</span><br><span class="line">                fn();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                d.documentElement.doScroll(<span class="string">'left'</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">                setTimeout(<span class="built_in">arguments</span>.callee,<span class="number">50</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            init();</span><br><span class="line">        &#125;)(); </span><br><span class="line">        d.onreadystatechange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            msgBox.innerHTML += <span class="string">"加载状态："</span> + d.readyState + <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">            <span class="keyword">if</span>(d.readyState == <span class="string">'complete'</span>)&#123;</span><br><span class="line">                d.onreadystatechange = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        msgBox.innerHTML += <span class="string">"onload已加载！&lt;br&gt;"</span>;</span><br><span class="line">        time2 = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">        msgBox.innerHTML += <span class="string">"时间戳："</span> + time2 + <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">        msgBox.innerHTML +=<span class="string">"domReady比onload快："</span> + (time2 - time1) + <span class="string">"ms&lt;br&gt;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>相信js脚本不用做过多解释，在前面都已做过详细分析，我们直接来看运行结果：</p>
<p><img src="/images/1510171431.png" alt="运行结果"></p>
<p>很容易就能看出，<code>DOMContentLoaded</code>执行5238ms之后才执行的<code>onload</code>。这只是一个DEMO的差距，而如果是更大型的应用，可能这个时间差距会更大。</p>
<h2 id="最后">最后</h2><p>这就是本文所分享的domReady引入的机制，有兴趣的可以继续移步如下链接。希望本文能为你提供到帮助，也希望与读者多多交流。如文中内容有误，请评论告知~谢谢。</p>
<p>浏览器内部工作原理：</p>
<p><a href="http://kb.cnblogs.com/page/129756/" target="_blank" rel="external">http://kb.cnblogs.com/page/129756/</a></p>
<p>司徒正美《javascript的事件加载》：</p>
<p><a href="http://www.cnblogs.com/rubylouvre/archive/2009/08/26/1554204.html" target="_blank" rel="external">http://www.cnblogs.com/rubylouvre/archive/2009/08/26/1554204.html</a></p>
</div><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a href="/tags/domContentLoaded/" class="post__tag__link">domContentLoaded</a></li><li class="post__tag__item"><a href="/tags/domready/" class="post__tag__link">domready</a></li><li class="post__tag__item"><a href="/tags/javascript/" class="post__tag__link">javascript</a></li></ul><a class="post__foot-link u-fr"></a></footer></article></main><footer class="foot"><div class="foot-copy u-fl">&copy; 2016 Horve<bdi> Theme by <a href="https://github.com/andforce/hexo-theme-andforce" >andforce</a></bdi></div><menu class="page-menu u-fr"><li class="page-menu__item"><span title="Previous" class="page-menu__link icon-arrow-left page-menu__link--disabled"></span></li><li class="page-menu__item"><span title="Next" class="page-menu__link icon-arrow-right page-menu__link--disabled"></span></li></menu></footer></body></html>